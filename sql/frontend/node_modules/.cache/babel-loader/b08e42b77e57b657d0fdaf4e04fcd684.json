{"ast":null,"code":"var _ = require(\"../lodash\");\n\nmodule.exports = tarjan;\n\nfunction tarjan(g) {\n  var index = 0;\n  var stack = [];\n  var visited = {}; // node id -> { onStack, lowlink, index }\n\n  var results = [];\n\n  function dfs(v) {\n    var entry = visited[v] = {\n      onStack: true,\n      lowlink: index,\n      index: index++\n    };\n    stack.push(v);\n    g.successors(v).forEach(function (w) {\n      if (!_.has(visited, w)) {\n        dfs(w);\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink);\n      } else if (visited[w].onStack) {\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index);\n      }\n    });\n\n    if (entry.lowlink === entry.index) {\n      var cmpt = [];\n      var w;\n\n      do {\n        w = stack.pop();\n        visited[w].onStack = false;\n        cmpt.push(w);\n      } while (v !== w);\n\n      results.push(cmpt);\n    }\n  }\n\n  g.nodes().forEach(function (v) {\n    if (!_.has(visited, v)) {\n      dfs(v);\n    }\n  });\n  return results;\n}","map":{"version":3,"sources":["D:/SQL/sqlindex2/sql/frontend/node_modules/graphlib/lib/alg/tarjan.js"],"names":["_","require","module","exports","tarjan","g","index","stack","visited","results","dfs","v","entry","onStack","lowlink","push","successors","forEach","w","has","Math","min","cmpt","pop","nodes"],"mappings":"AAAA,IAAIA,CAAC,GAAGC,OAAO,CAAC,WAAD,CAAf;;AAEAC,MAAM,CAACC,OAAP,GAAiBC,MAAjB;;AAEA,SAASA,MAAT,CAAgBC,CAAhB,EAAmB;AACjB,MAAIC,KAAK,GAAG,CAAZ;AACA,MAAIC,KAAK,GAAG,EAAZ;AACA,MAAIC,OAAO,GAAG,EAAd,CAHiB,CAGC;;AAClB,MAAIC,OAAO,GAAG,EAAd;;AAEA,WAASC,GAAT,CAAaC,CAAb,EAAgB;AACd,QAAIC,KAAK,GAAGJ,OAAO,CAACG,CAAD,CAAP,GAAa;AACvBE,MAAAA,OAAO,EAAE,IADc;AAEvBC,MAAAA,OAAO,EAAER,KAFc;AAGvBA,MAAAA,KAAK,EAAEA,KAAK;AAHW,KAAzB;AAKAC,IAAAA,KAAK,CAACQ,IAAN,CAAWJ,CAAX;AAEAN,IAAAA,CAAC,CAACW,UAAF,CAAaL,CAAb,EAAgBM,OAAhB,CAAwB,UAASC,CAAT,EAAY;AAClC,UAAI,CAAClB,CAAC,CAACmB,GAAF,CAAMX,OAAN,EAAeU,CAAf,CAAL,EAAwB;AACtBR,QAAAA,GAAG,CAACQ,CAAD,CAAH;AACAN,QAAAA,KAAK,CAACE,OAAN,GAAgBM,IAAI,CAACC,GAAL,CAAST,KAAK,CAACE,OAAf,EAAwBN,OAAO,CAACU,CAAD,CAAP,CAAWJ,OAAnC,CAAhB;AACD,OAHD,MAGO,IAAIN,OAAO,CAACU,CAAD,CAAP,CAAWL,OAAf,EAAwB;AAC7BD,QAAAA,KAAK,CAACE,OAAN,GAAgBM,IAAI,CAACC,GAAL,CAAST,KAAK,CAACE,OAAf,EAAwBN,OAAO,CAACU,CAAD,CAAP,CAAWZ,KAAnC,CAAhB;AACD;AACF,KAPD;;AASA,QAAIM,KAAK,CAACE,OAAN,KAAkBF,KAAK,CAACN,KAA5B,EAAmC;AACjC,UAAIgB,IAAI,GAAG,EAAX;AACA,UAAIJ,CAAJ;;AACA,SAAG;AACDA,QAAAA,CAAC,GAAGX,KAAK,CAACgB,GAAN,EAAJ;AACAf,QAAAA,OAAO,CAACU,CAAD,CAAP,CAAWL,OAAX,GAAqB,KAArB;AACAS,QAAAA,IAAI,CAACP,IAAL,CAAUG,CAAV;AACD,OAJD,QAISP,CAAC,KAAKO,CAJf;;AAKAT,MAAAA,OAAO,CAACM,IAAR,CAAaO,IAAb;AACD;AACF;;AAEDjB,EAAAA,CAAC,CAACmB,KAAF,GAAUP,OAAV,CAAkB,UAASN,CAAT,EAAY;AAC5B,QAAI,CAACX,CAAC,CAACmB,GAAF,CAAMX,OAAN,EAAeG,CAAf,CAAL,EAAwB;AACtBD,MAAAA,GAAG,CAACC,CAAD,CAAH;AACD;AACF,GAJD;AAMA,SAAOF,OAAP;AACD","sourcesContent":["var _ = require(\"../lodash\");\r\n\r\nmodule.exports = tarjan;\r\n\r\nfunction tarjan(g) {\r\n  var index = 0;\r\n  var stack = [];\r\n  var visited = {}; // node id -> { onStack, lowlink, index }\r\n  var results = [];\r\n\r\n  function dfs(v) {\r\n    var entry = visited[v] = {\r\n      onStack: true,\r\n      lowlink: index,\r\n      index: index++\r\n    };\r\n    stack.push(v);\r\n\r\n    g.successors(v).forEach(function(w) {\r\n      if (!_.has(visited, w)) {\r\n        dfs(w);\r\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink);\r\n      } else if (visited[w].onStack) {\r\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index);\r\n      }\r\n    });\r\n\r\n    if (entry.lowlink === entry.index) {\r\n      var cmpt = [];\r\n      var w;\r\n      do {\r\n        w = stack.pop();\r\n        visited[w].onStack = false;\r\n        cmpt.push(w);\r\n      } while (v !== w);\r\n      results.push(cmpt);\r\n    }\r\n  }\r\n\r\n  g.nodes().forEach(function(v) {\r\n    if (!_.has(visited, v)) {\r\n      dfs(v);\r\n    }\r\n  });\r\n\r\n  return results;\r\n}\r\n"]},"metadata":{},"sourceType":"script"}