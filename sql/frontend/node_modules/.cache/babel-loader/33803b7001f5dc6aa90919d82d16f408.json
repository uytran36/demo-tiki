{"ast":null,"code":"import { __assign, __rest } from \"tslib\";\nimport { mix, isString } from '@antv/util';\nimport { registerNode, BaseGlobal as Global } from '@antv/g6-core';\nregisterNode('modelRect', {\n  // 自定义节点时的配置\n  options: {\n    size: [185, 70],\n    style: {\n      radius: 5,\n      stroke: '#69c0ff',\n      fill: '#ffffff',\n      lineWidth: Global.defaultNode.style.lineWidth,\n      fillOpacity: 1\n    },\n    // 文本样式配置\n    labelCfg: {\n      style: {\n        fill: '#595959',\n        fontSize: 14\n      },\n      offset: 30 // 距离左侧的 offset，没有设置 y 轴上移动的配置\n\n    },\n    descriptionCfg: {\n      style: {\n        fontSize: 12,\n        fill: '#bfbfbf'\n      },\n      paddingTop: 0\n    },\n    preRect: {\n      show: true,\n      width: 4,\n      fill: '#40a9ff',\n      radius: 2\n    },\n    // 节点上左右上下四个方向上的链接circle配置\n    linkPoints: {\n      top: false,\n      right: false,\n      bottom: false,\n      left: false,\n      // circle的大小\n      size: 10,\n      lineWidth: 1,\n      fill: '#72CC4A',\n      stroke: '#72CC4A'\n    },\n    // 节点中icon配置\n    logoIcon: {\n      // 是否显示icon，值为 false 则不渲染icon\n      show: true,\n      x: 0,\n      y: 0,\n      // icon的地址，字符串类型\n      img: 'https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg',\n      width: 16,\n      height: 16,\n      // 用于调整图标的左右位置\n      offset: 0\n    },\n    // 节点中表示状态的icon配置\n    stateIcon: {\n      // 是否显示icon，值为 false 则不渲染icon\n      show: true,\n      x: 0,\n      y: 0,\n      // icon的地址，字符串类型\n      img: 'https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg',\n      width: 16,\n      height: 16,\n      // 用于调整图标的左右位置\n      offset: -5\n    },\n    // 连接点，默认为左右\n    // anchorPoints: [{ x: 0, y: 0.5 }, { x: 1, y: 0.5 }]\n    anchorPoints: [[0, 0.5], [1, 0.5]]\n  },\n  shapeType: 'modelRect',\n  drawShape: function drawShape(cfg, group) {\n    var _a = this.getOptions(cfg).preRect,\n        preRect = _a === void 0 ? {} : _a;\n    var style = this.getShapeStyle(cfg);\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n    var keyShape = group.addShape('rect', {\n      attrs: style,\n      className: this.type + \"-keyShape\",\n      name: this.type + \"-keyShape\",\n      draggable: true\n    });\n\n    var preRectShow = preRect.show,\n        preRectStyle = __rest(preRect, [\"show\"]);\n\n    if (preRectShow) {\n      group.addShape('rect', {\n        attrs: __assign({\n          x: -width / 2,\n          y: -height / 2,\n          height: height\n        }, preRectStyle),\n        className: 'pre-rect',\n        name: 'pre-rect',\n        draggable: true\n      });\n    }\n\n    this.drawLogoIcon(cfg, group);\n    this.drawStateIcon(cfg, group);\n    this.drawLinkPoints(cfg, group);\n    return keyShape;\n  },\n\n  /**\r\n   * 绘制模型矩形左边的logo图标\r\n   * @param {Object} cfg 数据配置项\r\n   * @param {Group} group Group实例\r\n   */\n  drawLogoIcon: function drawLogoIcon(cfg, group) {\n    var _a = this.getOptions(cfg).logoIcon,\n        logoIcon = _a === void 0 ? {} : _a;\n    var size = this.getSize(cfg);\n    var width = size[0];\n\n    if (logoIcon.show) {\n      var w = logoIcon.width,\n          h = logoIcon.height,\n          x = logoIcon.x,\n          y = logoIcon.y,\n          offset = logoIcon.offset,\n          text = logoIcon.text,\n          logoIconStyle = __rest(logoIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\", \"text\"]);\n\n      if (text) {\n        group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, logoIconStyle),\n          className: 'rect-logo-icon',\n          name: 'rect-logo-icon',\n          draggable: true\n        });\n      } else {\n        group.addShape('image', {\n          attrs: __assign(__assign({}, logoIconStyle), {\n            x: x || -width / 2 + w + offset,\n            y: y || -h / 2,\n            width: w,\n            height: h\n          }),\n          className: 'rect-logo-icon',\n          name: 'rect-logo-icon',\n          draggable: true\n        });\n      }\n    }\n  },\n\n  /**\r\n   * 绘制模型矩形右边的状态图标\r\n   * @param {Object} cfg 数据配置项\r\n   * @param {Group} group Group实例\r\n   */\n  drawStateIcon: function drawStateIcon(cfg, group) {\n    var _a = this.getOptions(cfg).stateIcon,\n        stateIcon = _a === void 0 ? {} : _a;\n    var size = this.getSize(cfg);\n    var width = size[0];\n\n    if (stateIcon.show) {\n      var w = stateIcon.width,\n          h = stateIcon.height,\n          x = stateIcon.x,\n          y = stateIcon.y,\n          offset = stateIcon.offset,\n          text = stateIcon.text,\n          iconStyle = __rest(stateIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\", \"text\"]);\n\n      if (text) {\n        group.addShape('text', {\n          attrs: __assign({\n            x: 0,\n            y: 0,\n            fontSize: 12,\n            fill: '#000',\n            stroke: '#000',\n            textBaseline: 'middle',\n            textAlign: 'center'\n          }, iconStyle),\n          className: 'rect-state-icon',\n          name: 'rect-state-icon',\n          draggable: true\n        });\n      } else {\n        group.addShape('image', {\n          attrs: __assign(__assign({}, iconStyle), {\n            x: x || width / 2 - w + offset,\n            y: y || -h / 2,\n            width: w,\n            height: h\n          }),\n          className: 'rect-state-icon',\n          name: 'rect-state-icon',\n          draggable: true\n        });\n      }\n    }\n  },\n\n  /**\r\n   * 绘制节点上的LinkPoints\r\n   * @param {Object} cfg data数据配置项\r\n   * @param {Group} group Group实例\r\n   */\n  drawLinkPoints: function drawLinkPoints(cfg, group) {\n    var _a = this.getOptions(cfg).linkPoints,\n        linkPoints = _a === void 0 ? {} : _a;\n\n    var top = linkPoints.top,\n        left = linkPoints.left,\n        right = linkPoints.right,\n        bottom = linkPoints.bottom,\n        markSize = linkPoints.size,\n        markR = linkPoints.r,\n        markStyle = __rest(linkPoints, [\"top\", \"left\", \"right\", \"bottom\", \"size\", \"r\"]);\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n\n    if (left) {\n      // left circle\n      group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: -width / 2,\n          y: 0,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-left',\n        name: 'link-point-left',\n        isAnchorPoint: true\n      });\n    }\n\n    if (right) {\n      // right circle\n      group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: width / 2,\n          y: 0,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-right',\n        name: 'link-point-right',\n        isAnchorPoint: true\n      });\n    }\n\n    if (top) {\n      // top circle\n      group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: 0,\n          y: -height / 2,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-top',\n        name: 'link-point-top',\n        isAnchorPoint: true\n      });\n    }\n\n    if (bottom) {\n      // bottom circle\n      group.addShape('circle', {\n        attrs: __assign(__assign({}, markStyle), {\n          x: 0,\n          y: height / 2,\n          r: markSize / 2 || markR || 5\n        }),\n        className: 'link-point-bottom',\n        name: 'link-point-bottom',\n        isAnchorPoint: true\n      });\n    }\n  },\n  drawLabel: function drawLabel(cfg, group) {\n    var _a = this.getOptions(cfg),\n        _b = _a.labelCfg,\n        labelCfg = _b === void 0 ? {} : _b,\n        _c = _a.logoIcon,\n        logoIcon = _c === void 0 ? {} : _c,\n        _d = _a.descriptionCfg,\n        descriptionCfg = _d === void 0 ? {} : _d;\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var label = null;\n    var show = logoIcon.show,\n        w = logoIcon.width;\n    var offsetX = -width / 2 + labelCfg.offset;\n\n    if (show) {\n      offsetX = -width / 2 + w + labelCfg.offset;\n    }\n\n    var fontStyle = labelCfg.style;\n    var descriptionStyle = descriptionCfg.style,\n        descriptionPaddingTop = descriptionCfg.paddingTop;\n\n    if (isString(cfg.description)) {\n      label = group.addShape('text', {\n        attrs: __assign(__assign({}, fontStyle), {\n          x: offsetX,\n          y: -5,\n          text: cfg.label\n        }),\n        className: 'text-shape',\n        name: 'text-shape',\n        draggable: true\n      });\n      group.addShape('text', {\n        attrs: __assign(__assign({}, descriptionStyle), {\n          x: offsetX,\n          y: 17 + (descriptionPaddingTop || 0),\n          text: cfg.description\n        }),\n        className: 'rect-description',\n        name: 'rect-description',\n        draggable: true\n      });\n    } else {\n      label = group.addShape('text', {\n        attrs: __assign(__assign({}, fontStyle), {\n          x: offsetX,\n          y: 7,\n          text: cfg.label\n        }),\n        className: 'text-shape',\n        name: 'text-shape',\n        draggable: true\n      });\n    }\n\n    return label;\n  },\n\n  /**\r\n   * 获取节点的样式，供基于该节点自定义时使用\r\n   * @param {Object} cfg 节点数据模型\r\n   * @return {Object} 节点的样式\r\n   */\n  getShapeStyle: function getShapeStyle(cfg) {\n    var defaultStyle = this.getOptions(cfg).style;\n    var strokeStyle = {\n      stroke: cfg.color\n    }; // 如果设置了color，则覆盖默认的stroke属性\n\n    var style = mix({}, defaultStyle, strokeStyle);\n    var size = this.getSize(cfg);\n    var width = style.width || size[0];\n    var height = style.height || size[1];\n\n    var styles = __assign({\n      x: -width / 2,\n      y: -height / 2,\n      width: width,\n      height: height\n    }, style);\n\n    return styles;\n  },\n  update: function update(cfg, item) {\n    var _a = this.getOptions(cfg),\n        _b = _a.style,\n        style = _b === void 0 ? {} : _b,\n        _c = _a.labelCfg,\n        labelCfg = _c === void 0 ? {} : _c,\n        _d = _a.descriptionCfg,\n        descriptionCfg = _d === void 0 ? {} : _d;\n\n    var size = this.getSize(cfg);\n    var width = size[0];\n    var height = size[1];\n    var keyShape = item.get('keyShape');\n    keyShape.attr(__assign(__assign({}, style), {\n      x: -width / 2,\n      y: -height / 2,\n      width: width,\n      height: height\n    }));\n    var group = item.getContainer();\n    var logoIconShape = group.find(function (element) {\n      return element.get('className') === 'rect-logo-icon';\n    });\n    var currentLogoIconAttr = logoIconShape ? logoIconShape.attr() : {};\n    var logoIcon = mix({}, currentLogoIconAttr, cfg.logoIcon);\n    var w = logoIcon.width;\n\n    if (w === undefined) {\n      w = this.options.logoIcon.width;\n    }\n\n    var show = cfg.logoIcon ? cfg.logoIcon.show : undefined;\n    var offset = labelCfg.offset;\n    var offsetX = -width / 2 + w + offset;\n\n    if (!show && show !== undefined) {\n      offsetX = -width / 2 + offset;\n    }\n\n    var label = group.find(function (element) {\n      return element.get('className') === 'node-label';\n    });\n    var description = group.find(function (element) {\n      return element.get('className') === 'rect-description';\n    });\n\n    if (cfg.label) {\n      if (!label) {\n        group.addShape('text', {\n          attrs: __assign(__assign({}, labelCfg.style), {\n            x: offsetX,\n            y: cfg.description ? -5 : 7,\n            text: cfg.label\n          }),\n          className: 'node-label',\n          name: 'node-label',\n          draggable: true\n        });\n      } else {\n        var cfgStyle = cfg.labelCfg ? cfg.labelCfg.style : {};\n        var labelStyle = mix({}, label.attr(), cfgStyle);\n        if (cfg.label) labelStyle.text = cfg.label;\n        labelStyle.x = offsetX;\n        if (isString(cfg.description)) labelStyle.y = -5;\n\n        if (description) {\n          description.resetMatrix();\n          description.attr({\n            x: offsetX\n          });\n        }\n\n        label.resetMatrix();\n        label.attr(labelStyle);\n      }\n    }\n\n    if (isString(cfg.description)) {\n      var paddingTop = descriptionCfg.paddingTop;\n\n      if (!description) {\n        group.addShape('text', {\n          attrs: __assign(__assign({}, descriptionCfg.style), {\n            x: offsetX,\n            y: 17 + (paddingTop || 0),\n            text: cfg.description\n          }),\n          className: 'rect-description',\n          name: 'rect-description',\n          draggable: true\n        });\n      } else {\n        var cfgStyle = cfg.descriptionCfg ? cfg.descriptionCfg.style : {};\n        var descriptionStyle = mix({}, description.attr(), cfgStyle);\n        if (isString(cfg.description)) descriptionStyle.text = cfg.description;\n        descriptionStyle.x = offsetX;\n        description.resetMatrix();\n        description.attr(__assign(__assign({}, descriptionStyle), {\n          y: 17 + (paddingTop || 0)\n        }));\n      }\n    }\n\n    var preRectShape = group.find(function (element) {\n      return element.get('className') === 'pre-rect';\n    });\n\n    if (preRectShape) {\n      var preRect = mix({}, preRectShape.attr(), cfg.preRect);\n      preRectShape.attr(__assign(__assign({}, preRect), {\n        x: -width / 2,\n        y: -height / 2,\n        height: height\n      }));\n    }\n\n    if (logoIconShape) {\n      if (!show && show !== undefined) {\n        logoIconShape.remove();\n      } else {\n        var logoW = logoIcon.width,\n            h = logoIcon.height,\n            x = logoIcon.x,\n            y = logoIcon.y,\n            logoOffset = logoIcon.offset,\n            logoIconStyle = __rest(logoIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\"]);\n\n        logoIconShape.attr(__assign(__assign({}, logoIconStyle), {\n          x: x || -width / 2 + logoW + logoOffset,\n          y: y || -h / 2,\n          width: logoW,\n          height: h\n        }));\n      }\n    } else if (show) {\n      this.drawLogoIcon(cfg, group);\n    }\n\n    var stateIconShape = group.find(function (element) {\n      return element.get('className') === 'rect-state-icon';\n    });\n    var currentStateIconAttr = stateIconShape ? stateIconShape.attr() : {};\n    var stateIcon = mix({}, currentStateIconAttr, cfg.stateIcon);\n\n    if (stateIconShape) {\n      if (!stateIcon.show && stateIcon.show !== undefined) {\n        stateIconShape.remove();\n      }\n\n      var stateW = stateIcon.width,\n          h = stateIcon.height,\n          x = stateIcon.x,\n          y = stateIcon.y,\n          stateOffset = stateIcon.offset,\n          stateIconStyle = __rest(stateIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\"]);\n\n      stateIconShape.attr(__assign(__assign({}, stateIconStyle), {\n        x: x || width / 2 - stateW + stateOffset,\n        y: y || -h / 2,\n        width: stateW,\n        height: h\n      }));\n    } else if (stateIcon.show) {\n      this.drawStateIcon(cfg, group);\n    }\n\n    this.updateLinkPoints(cfg, group);\n  }\n}, 'single-node');","map":{"version":3,"sources":["D:/SQL/sqlindex2/sql/frontend/node_modules/@antv/g6-element/es/nodes/modelRect.js"],"names":["__assign","__rest","mix","isString","registerNode","BaseGlobal","Global","options","size","style","radius","stroke","fill","lineWidth","defaultNode","fillOpacity","labelCfg","fontSize","offset","descriptionCfg","paddingTop","preRect","show","width","linkPoints","top","right","bottom","left","logoIcon","x","y","img","height","stateIcon","anchorPoints","shapeType","drawShape","cfg","group","_a","getOptions","getShapeStyle","getSize","keyShape","addShape","attrs","className","type","name","draggable","preRectShow","preRectStyle","drawLogoIcon","drawStateIcon","drawLinkPoints","w","h","text","logoIconStyle","textBaseline","textAlign","iconStyle","markSize","markR","r","markStyle","isAnchorPoint","drawLabel","_b","_c","_d","label","offsetX","fontStyle","descriptionStyle","descriptionPaddingTop","description","defaultStyle","strokeStyle","color","styles","update","item","get","attr","getContainer","logoIconShape","find","element","currentLogoIconAttr","undefined","cfgStyle","labelStyle","resetMatrix","preRectShape","remove","logoW","logoOffset","stateIconShape","currentStateIconAttr","stateW","stateOffset","stateIconStyle","updateLinkPoints"],"mappings":"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","sourcesContent":["import { __assign, __rest } from \"tslib\";\r\nimport { mix, isString } from '@antv/util';\r\nimport { registerNode, BaseGlobal as Global } from '@antv/g6-core';\r\nregisterNode('modelRect', {\r\n  // 自定义节点时的配置\r\n  options: {\r\n    size: [185, 70],\r\n    style: {\r\n      radius: 5,\r\n      stroke: '#69c0ff',\r\n      fill: '#ffffff',\r\n      lineWidth: Global.defaultNode.style.lineWidth,\r\n      fillOpacity: 1\r\n    },\r\n    // 文本样式配置\r\n    labelCfg: {\r\n      style: {\r\n        fill: '#595959',\r\n        fontSize: 14\r\n      },\r\n      offset: 30 // 距离左侧的 offset，没有设置 y 轴上移动的配置\r\n\r\n    },\r\n    descriptionCfg: {\r\n      style: {\r\n        fontSize: 12,\r\n        fill: '#bfbfbf'\r\n      },\r\n      paddingTop: 0\r\n    },\r\n    preRect: {\r\n      show: true,\r\n      width: 4,\r\n      fill: '#40a9ff',\r\n      radius: 2\r\n    },\r\n    // 节点上左右上下四个方向上的链接circle配置\r\n    linkPoints: {\r\n      top: false,\r\n      right: false,\r\n      bottom: false,\r\n      left: false,\r\n      // circle的大小\r\n      size: 10,\r\n      lineWidth: 1,\r\n      fill: '#72CC4A',\r\n      stroke: '#72CC4A'\r\n    },\r\n    // 节点中icon配置\r\n    logoIcon: {\r\n      // 是否显示icon，值为 false 则不渲染icon\r\n      show: true,\r\n      x: 0,\r\n      y: 0,\r\n      // icon的地址，字符串类型\r\n      img: 'https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg',\r\n      width: 16,\r\n      height: 16,\r\n      // 用于调整图标的左右位置\r\n      offset: 0\r\n    },\r\n    // 节点中表示状态的icon配置\r\n    stateIcon: {\r\n      // 是否显示icon，值为 false 则不渲染icon\r\n      show: true,\r\n      x: 0,\r\n      y: 0,\r\n      // icon的地址，字符串类型\r\n      img: 'https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg',\r\n      width: 16,\r\n      height: 16,\r\n      // 用于调整图标的左右位置\r\n      offset: -5\r\n    },\r\n    // 连接点，默认为左右\r\n    // anchorPoints: [{ x: 0, y: 0.5 }, { x: 1, y: 0.5 }]\r\n    anchorPoints: [[0, 0.5], [1, 0.5]]\r\n  },\r\n  shapeType: 'modelRect',\r\n  drawShape: function drawShape(cfg, group) {\r\n    var _a = this.getOptions(cfg).preRect,\r\n        preRect = _a === void 0 ? {} : _a;\r\n    var style = this.getShapeStyle(cfg);\r\n    var size = this.getSize(cfg);\r\n    var width = size[0];\r\n    var height = size[1];\r\n    var keyShape = group.addShape('rect', {\r\n      attrs: style,\r\n      className: this.type + \"-keyShape\",\r\n      name: this.type + \"-keyShape\",\r\n      draggable: true\r\n    });\r\n\r\n    var preRectShow = preRect.show,\r\n        preRectStyle = __rest(preRect, [\"show\"]);\r\n\r\n    if (preRectShow) {\r\n      group.addShape('rect', {\r\n        attrs: __assign({\r\n          x: -width / 2,\r\n          y: -height / 2,\r\n          height: height\r\n        }, preRectStyle),\r\n        className: 'pre-rect',\r\n        name: 'pre-rect',\r\n        draggable: true\r\n      });\r\n    }\r\n\r\n    this.drawLogoIcon(cfg, group);\r\n    this.drawStateIcon(cfg, group);\r\n    this.drawLinkPoints(cfg, group);\r\n    return keyShape;\r\n  },\r\n\r\n  /**\r\n   * 绘制模型矩形左边的logo图标\r\n   * @param {Object} cfg 数据配置项\r\n   * @param {Group} group Group实例\r\n   */\r\n  drawLogoIcon: function drawLogoIcon(cfg, group) {\r\n    var _a = this.getOptions(cfg).logoIcon,\r\n        logoIcon = _a === void 0 ? {} : _a;\r\n    var size = this.getSize(cfg);\r\n    var width = size[0];\r\n\r\n    if (logoIcon.show) {\r\n      var w = logoIcon.width,\r\n          h = logoIcon.height,\r\n          x = logoIcon.x,\r\n          y = logoIcon.y,\r\n          offset = logoIcon.offset,\r\n          text = logoIcon.text,\r\n          logoIconStyle = __rest(logoIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\", \"text\"]);\r\n\r\n      if (text) {\r\n        group.addShape('text', {\r\n          attrs: __assign({\r\n            x: 0,\r\n            y: 0,\r\n            fontSize: 12,\r\n            fill: '#000',\r\n            stroke: '#000',\r\n            textBaseline: 'middle',\r\n            textAlign: 'center'\r\n          }, logoIconStyle),\r\n          className: 'rect-logo-icon',\r\n          name: 'rect-logo-icon',\r\n          draggable: true\r\n        });\r\n      } else {\r\n        group.addShape('image', {\r\n          attrs: __assign(__assign({}, logoIconStyle), {\r\n            x: x || -width / 2 + w + offset,\r\n            y: y || -h / 2,\r\n            width: w,\r\n            height: h\r\n          }),\r\n          className: 'rect-logo-icon',\r\n          name: 'rect-logo-icon',\r\n          draggable: true\r\n        });\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 绘制模型矩形右边的状态图标\r\n   * @param {Object} cfg 数据配置项\r\n   * @param {Group} group Group实例\r\n   */\r\n  drawStateIcon: function drawStateIcon(cfg, group) {\r\n    var _a = this.getOptions(cfg).stateIcon,\r\n        stateIcon = _a === void 0 ? {} : _a;\r\n    var size = this.getSize(cfg);\r\n    var width = size[0];\r\n\r\n    if (stateIcon.show) {\r\n      var w = stateIcon.width,\r\n          h = stateIcon.height,\r\n          x = stateIcon.x,\r\n          y = stateIcon.y,\r\n          offset = stateIcon.offset,\r\n          text = stateIcon.text,\r\n          iconStyle = __rest(stateIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\", \"text\"]);\r\n\r\n      if (text) {\r\n        group.addShape('text', {\r\n          attrs: __assign({\r\n            x: 0,\r\n            y: 0,\r\n            fontSize: 12,\r\n            fill: '#000',\r\n            stroke: '#000',\r\n            textBaseline: 'middle',\r\n            textAlign: 'center'\r\n          }, iconStyle),\r\n          className: 'rect-state-icon',\r\n          name: 'rect-state-icon',\r\n          draggable: true\r\n        });\r\n      } else {\r\n        group.addShape('image', {\r\n          attrs: __assign(__assign({}, iconStyle), {\r\n            x: x || width / 2 - w + offset,\r\n            y: y || -h / 2,\r\n            width: w,\r\n            height: h\r\n          }),\r\n          className: 'rect-state-icon',\r\n          name: 'rect-state-icon',\r\n          draggable: true\r\n        });\r\n      }\r\n    }\r\n  },\r\n\r\n  /**\r\n   * 绘制节点上的LinkPoints\r\n   * @param {Object} cfg data数据配置项\r\n   * @param {Group} group Group实例\r\n   */\r\n  drawLinkPoints: function drawLinkPoints(cfg, group) {\r\n    var _a = this.getOptions(cfg).linkPoints,\r\n        linkPoints = _a === void 0 ? {} : _a;\r\n\r\n    var top = linkPoints.top,\r\n        left = linkPoints.left,\r\n        right = linkPoints.right,\r\n        bottom = linkPoints.bottom,\r\n        markSize = linkPoints.size,\r\n        markR = linkPoints.r,\r\n        markStyle = __rest(linkPoints, [\"top\", \"left\", \"right\", \"bottom\", \"size\", \"r\"]);\r\n\r\n    var size = this.getSize(cfg);\r\n    var width = size[0];\r\n    var height = size[1];\r\n\r\n    if (left) {\r\n      // left circle\r\n      group.addShape('circle', {\r\n        attrs: __assign(__assign({}, markStyle), {\r\n          x: -width / 2,\r\n          y: 0,\r\n          r: markSize / 2 || markR || 5\r\n        }),\r\n        className: 'link-point-left',\r\n        name: 'link-point-left',\r\n        isAnchorPoint: true\r\n      });\r\n    }\r\n\r\n    if (right) {\r\n      // right circle\r\n      group.addShape('circle', {\r\n        attrs: __assign(__assign({}, markStyle), {\r\n          x: width / 2,\r\n          y: 0,\r\n          r: markSize / 2 || markR || 5\r\n        }),\r\n        className: 'link-point-right',\r\n        name: 'link-point-right',\r\n        isAnchorPoint: true\r\n      });\r\n    }\r\n\r\n    if (top) {\r\n      // top circle\r\n      group.addShape('circle', {\r\n        attrs: __assign(__assign({}, markStyle), {\r\n          x: 0,\r\n          y: -height / 2,\r\n          r: markSize / 2 || markR || 5\r\n        }),\r\n        className: 'link-point-top',\r\n        name: 'link-point-top',\r\n        isAnchorPoint: true\r\n      });\r\n    }\r\n\r\n    if (bottom) {\r\n      // bottom circle\r\n      group.addShape('circle', {\r\n        attrs: __assign(__assign({}, markStyle), {\r\n          x: 0,\r\n          y: height / 2,\r\n          r: markSize / 2 || markR || 5\r\n        }),\r\n        className: 'link-point-bottom',\r\n        name: 'link-point-bottom',\r\n        isAnchorPoint: true\r\n      });\r\n    }\r\n  },\r\n  drawLabel: function drawLabel(cfg, group) {\r\n    var _a = this.getOptions(cfg),\r\n        _b = _a.labelCfg,\r\n        labelCfg = _b === void 0 ? {} : _b,\r\n        _c = _a.logoIcon,\r\n        logoIcon = _c === void 0 ? {} : _c,\r\n        _d = _a.descriptionCfg,\r\n        descriptionCfg = _d === void 0 ? {} : _d;\r\n\r\n    var size = this.getSize(cfg);\r\n    var width = size[0];\r\n    var label = null;\r\n    var show = logoIcon.show,\r\n        w = logoIcon.width;\r\n    var offsetX = -width / 2 + labelCfg.offset;\r\n\r\n    if (show) {\r\n      offsetX = -width / 2 + w + labelCfg.offset;\r\n    }\r\n\r\n    var fontStyle = labelCfg.style;\r\n    var descriptionStyle = descriptionCfg.style,\r\n        descriptionPaddingTop = descriptionCfg.paddingTop;\r\n\r\n    if (isString(cfg.description)) {\r\n      label = group.addShape('text', {\r\n        attrs: __assign(__assign({}, fontStyle), {\r\n          x: offsetX,\r\n          y: -5,\r\n          text: cfg.label\r\n        }),\r\n        className: 'text-shape',\r\n        name: 'text-shape',\r\n        draggable: true\r\n      });\r\n      group.addShape('text', {\r\n        attrs: __assign(__assign({}, descriptionStyle), {\r\n          x: offsetX,\r\n          y: 17 + (descriptionPaddingTop || 0),\r\n          text: cfg.description\r\n        }),\r\n        className: 'rect-description',\r\n        name: 'rect-description',\r\n        draggable: true\r\n      });\r\n    } else {\r\n      label = group.addShape('text', {\r\n        attrs: __assign(__assign({}, fontStyle), {\r\n          x: offsetX,\r\n          y: 7,\r\n          text: cfg.label\r\n        }),\r\n        className: 'text-shape',\r\n        name: 'text-shape',\r\n        draggable: true\r\n      });\r\n    }\r\n\r\n    return label;\r\n  },\r\n\r\n  /**\r\n   * 获取节点的样式，供基于该节点自定义时使用\r\n   * @param {Object} cfg 节点数据模型\r\n   * @return {Object} 节点的样式\r\n   */\r\n  getShapeStyle: function getShapeStyle(cfg) {\r\n    var defaultStyle = this.getOptions(cfg).style;\r\n    var strokeStyle = {\r\n      stroke: cfg.color\r\n    }; // 如果设置了color，则覆盖默认的stroke属性\r\n\r\n    var style = mix({}, defaultStyle, strokeStyle);\r\n    var size = this.getSize(cfg);\r\n    var width = style.width || size[0];\r\n    var height = style.height || size[1];\r\n\r\n    var styles = __assign({\r\n      x: -width / 2,\r\n      y: -height / 2,\r\n      width: width,\r\n      height: height\r\n    }, style);\r\n\r\n    return styles;\r\n  },\r\n  update: function update(cfg, item) {\r\n    var _a = this.getOptions(cfg),\r\n        _b = _a.style,\r\n        style = _b === void 0 ? {} : _b,\r\n        _c = _a.labelCfg,\r\n        labelCfg = _c === void 0 ? {} : _c,\r\n        _d = _a.descriptionCfg,\r\n        descriptionCfg = _d === void 0 ? {} : _d;\r\n\r\n    var size = this.getSize(cfg);\r\n    var width = size[0];\r\n    var height = size[1];\r\n    var keyShape = item.get('keyShape');\r\n    keyShape.attr(__assign(__assign({}, style), {\r\n      x: -width / 2,\r\n      y: -height / 2,\r\n      width: width,\r\n      height: height\r\n    }));\r\n    var group = item.getContainer();\r\n    var logoIconShape = group.find(function (element) {\r\n      return element.get('className') === 'rect-logo-icon';\r\n    });\r\n    var currentLogoIconAttr = logoIconShape ? logoIconShape.attr() : {};\r\n    var logoIcon = mix({}, currentLogoIconAttr, cfg.logoIcon);\r\n    var w = logoIcon.width;\r\n\r\n    if (w === undefined) {\r\n      w = this.options.logoIcon.width;\r\n    }\r\n\r\n    var show = cfg.logoIcon ? cfg.logoIcon.show : undefined;\r\n    var offset = labelCfg.offset;\r\n    var offsetX = -width / 2 + w + offset;\r\n\r\n    if (!show && show !== undefined) {\r\n      offsetX = -width / 2 + offset;\r\n    }\r\n\r\n    var label = group.find(function (element) {\r\n      return element.get('className') === 'node-label';\r\n    });\r\n    var description = group.find(function (element) {\r\n      return element.get('className') === 'rect-description';\r\n    });\r\n\r\n    if (cfg.label) {\r\n      if (!label) {\r\n        group.addShape('text', {\r\n          attrs: __assign(__assign({}, labelCfg.style), {\r\n            x: offsetX,\r\n            y: cfg.description ? -5 : 7,\r\n            text: cfg.label\r\n          }),\r\n          className: 'node-label',\r\n          name: 'node-label',\r\n          draggable: true\r\n        });\r\n      } else {\r\n        var cfgStyle = cfg.labelCfg ? cfg.labelCfg.style : {};\r\n        var labelStyle = mix({}, label.attr(), cfgStyle);\r\n        if (cfg.label) labelStyle.text = cfg.label;\r\n        labelStyle.x = offsetX;\r\n        if (isString(cfg.description)) labelStyle.y = -5;\r\n\r\n        if (description) {\r\n          description.resetMatrix();\r\n          description.attr({\r\n            x: offsetX\r\n          });\r\n        }\r\n\r\n        label.resetMatrix();\r\n        label.attr(labelStyle);\r\n      }\r\n    }\r\n\r\n    if (isString(cfg.description)) {\r\n      var paddingTop = descriptionCfg.paddingTop;\r\n\r\n      if (!description) {\r\n        group.addShape('text', {\r\n          attrs: __assign(__assign({}, descriptionCfg.style), {\r\n            x: offsetX,\r\n            y: 17 + (paddingTop || 0),\r\n            text: cfg.description\r\n          }),\r\n          className: 'rect-description',\r\n          name: 'rect-description',\r\n          draggable: true\r\n        });\r\n      } else {\r\n        var cfgStyle = cfg.descriptionCfg ? cfg.descriptionCfg.style : {};\r\n        var descriptionStyle = mix({}, description.attr(), cfgStyle);\r\n        if (isString(cfg.description)) descriptionStyle.text = cfg.description;\r\n        descriptionStyle.x = offsetX;\r\n        description.resetMatrix();\r\n        description.attr(__assign(__assign({}, descriptionStyle), {\r\n          y: 17 + (paddingTop || 0)\r\n        }));\r\n      }\r\n    }\r\n\r\n    var preRectShape = group.find(function (element) {\r\n      return element.get('className') === 'pre-rect';\r\n    });\r\n\r\n    if (preRectShape) {\r\n      var preRect = mix({}, preRectShape.attr(), cfg.preRect);\r\n      preRectShape.attr(__assign(__assign({}, preRect), {\r\n        x: -width / 2,\r\n        y: -height / 2,\r\n        height: height\r\n      }));\r\n    }\r\n\r\n    if (logoIconShape) {\r\n      if (!show && show !== undefined) {\r\n        logoIconShape.remove();\r\n      } else {\r\n        var logoW = logoIcon.width,\r\n            h = logoIcon.height,\r\n            x = logoIcon.x,\r\n            y = logoIcon.y,\r\n            logoOffset = logoIcon.offset,\r\n            logoIconStyle = __rest(logoIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\"]);\r\n\r\n        logoIconShape.attr(__assign(__assign({}, logoIconStyle), {\r\n          x: x || -width / 2 + logoW + logoOffset,\r\n          y: y || -h / 2,\r\n          width: logoW,\r\n          height: h\r\n        }));\r\n      }\r\n    } else if (show) {\r\n      this.drawLogoIcon(cfg, group);\r\n    }\r\n\r\n    var stateIconShape = group.find(function (element) {\r\n      return element.get('className') === 'rect-state-icon';\r\n    });\r\n    var currentStateIconAttr = stateIconShape ? stateIconShape.attr() : {};\r\n    var stateIcon = mix({}, currentStateIconAttr, cfg.stateIcon);\r\n\r\n    if (stateIconShape) {\r\n      if (!stateIcon.show && stateIcon.show !== undefined) {\r\n        stateIconShape.remove();\r\n      }\r\n\r\n      var stateW = stateIcon.width,\r\n          h = stateIcon.height,\r\n          x = stateIcon.x,\r\n          y = stateIcon.y,\r\n          stateOffset = stateIcon.offset,\r\n          stateIconStyle = __rest(stateIcon, [\"width\", \"height\", \"x\", \"y\", \"offset\"]);\r\n\r\n      stateIconShape.attr(__assign(__assign({}, stateIconStyle), {\r\n        x: x || width / 2 - stateW + stateOffset,\r\n        y: y || -h / 2,\r\n        width: stateW,\r\n        height: h\r\n      }));\r\n    } else if (stateIcon.show) {\r\n      this.drawStateIcon(cfg, group);\r\n    }\r\n\r\n    this.updateLinkPoints(cfg, group);\r\n  }\r\n}, 'single-node');"]},"metadata":{},"sourceType":"module"}