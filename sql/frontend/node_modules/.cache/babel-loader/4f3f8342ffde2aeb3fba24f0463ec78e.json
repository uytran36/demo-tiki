{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\nimport { isElement, isFunction, isString } from '@antv/util';\nimport HtmlComponent from '../abstract/html-component';\nimport { clearDom } from '../util/util';\n\nvar HtmlAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(HtmlAnnotation, _super);\n\n  function HtmlAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  HtmlAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'html',\n      locationType: 'point',\n      x: 0,\n      y: 0,\n      containerTpl: \"<div class=\\\"g2-html-annotation\\\"></div>\",\n      alignX: 'left',\n      alignY: 'top',\n      html: '',\n      zIndex: 7\n    });\n  };\n\n  HtmlAnnotation.prototype.render = function () {\n    var container = this.getContainer();\n    var html = this.get('html');\n    clearDom(container);\n    var rst = isFunction(html) ? html(container) : html;\n\n    if (isElement(rst)) {\n      container.appendChild(rst);\n    } else if (isString(rst)) {\n      container.appendChild(createDom(rst));\n    }\n\n    this.resetPosition();\n  };\n\n  HtmlAnnotation.prototype.resetPosition = function () {\n    var container = this.getContainer();\n\n    var _a = this.getLocation(),\n        x = _a.x,\n        y = _a.y;\n\n    var alignX = this.get('alignX');\n    var alignY = this.get('alignY');\n    var offsetX = this.get('offsetX');\n    var offsetY = this.get('offsetY');\n    var domWidth = getOuterWidth(container);\n    var domHeight = getOuterHeight(container);\n    var position = {\n      x: x,\n      y: y\n    };\n\n    if (alignX === 'middle') {\n      position.x -= Math.round(domWidth / 2);\n    } else if (alignX === 'right') {\n      position.x -= Math.round(domWidth);\n    }\n\n    if (alignY === 'middle') {\n      position.y -= Math.round(domHeight / 2);\n    } else if (alignY === 'bottom') {\n      position.y -= Math.round(domHeight);\n    }\n\n    if (offsetX) {\n      position.x += offsetX;\n    }\n\n    if (offsetY) {\n      position.y += offsetY;\n    }\n\n    modifyCSS(container, {\n      position: 'absolute',\n      left: position.x + \"px\",\n      top: position.y + \"px\",\n      zIndex: this.get('zIndex')\n    });\n  };\n\n  return HtmlAnnotation;\n}(HtmlComponent);\n\nexport default HtmlAnnotation;","map":{"version":3,"sources":["../../src/annotation/html.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { createDom, getOuterHeight, getOuterWidth, modifyCSS } from '@antv/dom-util';\r\nimport { isElement, isFunction, isString } from '@antv/util';\r\nimport HtmlComponent from '../abstract/html-component';\r\nimport { clearDom } from '../util/util';\r\nvar HtmlAnnotation = /** @class */ (function (_super) {\r\n    __extends(HtmlAnnotation, _super);\r\n    function HtmlAnnotation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    HtmlAnnotation.prototype.getDefaultCfg = function () {\r\n        var cfg = _super.prototype.getDefaultCfg.call(this);\r\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'html', locationType: 'point', x: 0, y: 0, containerTpl: \"<div class=\\\"g2-html-annotation\\\"></div>\", alignX: 'left', alignY: 'top', html: '', zIndex: 7 });\r\n    };\r\n    HtmlAnnotation.prototype.render = function () {\r\n        var container = this.getContainer();\r\n        var html = this.get('html');\r\n        clearDom(container);\r\n        var rst = isFunction(html) ? html(container) : html;\r\n        if (isElement(rst)) {\r\n            container.appendChild(rst);\r\n        }\r\n        else if (isString(rst)) {\r\n            container.appendChild(createDom(rst));\r\n        }\r\n        this.resetPosition();\r\n    };\r\n    HtmlAnnotation.prototype.resetPosition = function () {\r\n        var container = this.getContainer();\r\n        var _a = this.getLocation(), x = _a.x, y = _a.y;\r\n        var alignX = this.get('alignX');\r\n        var alignY = this.get('alignY');\r\n        var offsetX = this.get('offsetX');\r\n        var offsetY = this.get('offsetY');\r\n        var domWidth = getOuterWidth(container);\r\n        var domHeight = getOuterHeight(container);\r\n        var position = {\r\n            x: x,\r\n            y: y,\r\n        };\r\n        if (alignX === 'middle') {\r\n            position.x -= Math.round(domWidth / 2);\r\n        }\r\n        else if (alignX === 'right') {\r\n            position.x -= Math.round(domWidth);\r\n        }\r\n        if (alignY === 'middle') {\r\n            position.y -= Math.round(domHeight / 2);\r\n        }\r\n        else if (alignY === 'bottom') {\r\n            position.y -= Math.round(domHeight);\r\n        }\r\n        if (offsetX) {\r\n            position.x += offsetX;\r\n        }\r\n        if (offsetY) {\r\n            position.y += offsetY;\r\n        }\r\n        modifyCSS(container, {\r\n            position: 'absolute',\r\n            left: position.x + \"px\",\r\n            top: position.y + \"px\",\r\n            zIndex: this.get('zIndex'),\r\n        });\r\n    };\r\n    return HtmlAnnotation;\r\n}(HtmlComponent));\r\nexport default HtmlAnnotation;\r\n//# sourceMappingURL=html.js.map"]},"metadata":{},"sourceType":"module"}