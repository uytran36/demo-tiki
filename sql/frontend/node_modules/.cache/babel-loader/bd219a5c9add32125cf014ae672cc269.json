{"ast":null,"code":"/**\r\n * @fileoverview pattern\r\n * @author dengfuping_develop@163.com\r\n */\nimport { uniqueId } from '@antv/util';\nimport { createSVGElement } from '../util/dom';\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\n\nvar Pattern =\n/** @class */\nfunction () {\n  function Pattern(cfg) {\n    this.cfg = {};\n    var el = createSVGElement('pattern');\n    el.setAttribute('patternUnits', 'userSpaceOnUse');\n    var child = createSVGElement('image');\n    el.appendChild(child);\n    var id = uniqueId('pattern_');\n    el.id = id;\n    this.el = el;\n    this.id = id;\n    this.cfg = cfg;\n    var arr = regexPR.exec(cfg);\n    var source = arr[2];\n    child.setAttribute('href', source);\n    var img = new Image();\n\n    if (!source.match(/^data:/i)) {\n      img.crossOrigin = 'Anonymous';\n    }\n\n    img.src = source;\n\n    function onload() {\n      el.setAttribute('width', \"\" + img.width);\n      el.setAttribute('height', \"\" + img.height);\n    }\n\n    if (img.complete) {\n      onload();\n    } else {\n      img.onload = onload; // Fix onload() bug in IE9\n\n      img.src = img.src;\n    }\n\n    return this;\n  }\n\n  Pattern.prototype.match = function (type, attr) {\n    return this.cfg === attr;\n  };\n\n  return Pattern;\n}();\n\nexport default Pattern;","map":{"version":3,"sources":["../../src/defs/pattern.ts"],"names":[],"mappings":"AAAA;;;AAGG;AAEH,SAAS,QAAT,QAAyB,YAAzB;AACA,SAAS,gBAAT,QAAiC,aAAjC;AAEA,IAAM,OAAO,GAAG,iCAAhB;;AAEA,IAAA,OAAA;AAAA;AAAA,YAAA;AAOE,WAAA,OAAA,CAAY,GAAZ,EAAe;AAJf,SAAA,GAAA,GAEI,EAFJ;AAKE,QAAM,EAAE,GAAG,gBAAgB,CAAC,SAAD,CAA3B;AACA,IAAA,EAAE,CAAC,YAAH,CAAgB,cAAhB,EAAgC,gBAAhC;AACA,QAAM,KAAK,GAAG,gBAAgB,CAAC,OAAD,CAA9B;AACA,IAAA,EAAE,CAAC,WAAH,CAAe,KAAf;AACA,QAAM,EAAE,GAAG,QAAQ,CAAC,UAAD,CAAnB;AACA,IAAA,EAAE,CAAC,EAAH,GAAQ,EAAR;AACA,SAAK,EAAL,GAAU,EAAV;AACA,SAAK,EAAL,GAAU,EAAV;AACA,SAAK,GAAL,GAAW,GAAX;AACA,QAAM,GAAG,GAAG,OAAO,CAAC,IAAR,CAAa,GAAb,CAAZ;AACA,QAAM,MAAM,GAAG,GAAG,CAAC,CAAD,CAAlB;AACA,IAAA,KAAK,CAAC,YAAN,CAAmB,MAAnB,EAA2B,MAA3B;AACA,QAAM,GAAG,GAAG,IAAI,KAAJ,EAAZ;;AACA,QAAI,CAAC,MAAM,CAAC,KAAP,CAAa,SAAb,CAAL,EAA8B;AAC5B,MAAA,GAAG,CAAC,WAAJ,GAAkB,WAAlB;AACD;;AACD,IAAA,GAAG,CAAC,GAAJ,GAAU,MAAV;;AACA,aAAS,MAAT,GAAe;AACb,MAAA,EAAE,CAAC,YAAH,CAAgB,OAAhB,EAAyB,KAAG,GAAG,CAAC,KAAhC;AACA,MAAA,EAAE,CAAC,YAAH,CAAgB,QAAhB,EAA0B,KAAG,GAAG,CAAC,MAAjC;AACD;;AACD,QAAI,GAAG,CAAC,QAAR,EAAkB;AAChB,MAAA,MAAM;AACP,KAFD,MAEO;AACL,MAAA,GAAG,CAAC,MAAJ,GAAa,MAAb,CADK,CAEL;;AACA,MAAA,GAAG,CAAC,GAAJ,GAAU,GAAG,CAAC,GAAd;AACD;;AAED,WAAO,IAAP;AACD;;AAED,EAAA,OAAA,CAAA,SAAA,CAAA,KAAA,GAAA,UAAM,IAAN,EAAY,IAAZ,EAAgB;AACd,WAAO,KAAK,GAAL,KAAa,IAApB;AACD,GAFD;;AAGF,SAAA,OAAA;AAAC,CA3CD,EAAA;;AA6CA,eAAe,OAAf","sourceRoot":"","sourcesContent":["/**\r\n * @fileoverview pattern\r\n * @author dengfuping_develop@163.com\r\n */\r\nimport { uniqueId } from '@antv/util';\r\nimport { createSVGElement } from '../util/dom';\r\nvar regexPR = /^p\\s*\\(\\s*([axyn])\\s*\\)\\s*(.*)/i;\r\nvar Pattern = /** @class */ (function () {\r\n    function Pattern(cfg) {\r\n        this.cfg = {};\r\n        var el = createSVGElement('pattern');\r\n        el.setAttribute('patternUnits', 'userSpaceOnUse');\r\n        var child = createSVGElement('image');\r\n        el.appendChild(child);\r\n        var id = uniqueId('pattern_');\r\n        el.id = id;\r\n        this.el = el;\r\n        this.id = id;\r\n        this.cfg = cfg;\r\n        var arr = regexPR.exec(cfg);\r\n        var source = arr[2];\r\n        child.setAttribute('href', source);\r\n        var img = new Image();\r\n        if (!source.match(/^data:/i)) {\r\n            img.crossOrigin = 'Anonymous';\r\n        }\r\n        img.src = source;\r\n        function onload() {\r\n            el.setAttribute('width', \"\" + img.width);\r\n            el.setAttribute('height', \"\" + img.height);\r\n        }\r\n        if (img.complete) {\r\n            onload();\r\n        }\r\n        else {\r\n            img.onload = onload;\r\n            // Fix onload() bug in IE9\r\n            img.src = img.src;\r\n        }\r\n        return this;\r\n    }\r\n    Pattern.prototype.match = function (type, attr) {\r\n        return this.cfg === attr;\r\n    };\r\n    return Pattern;\r\n}());\r\nexport default Pattern;\r\n//# sourceMappingURL=pattern.js.map"]},"metadata":{},"sourceType":"module"}