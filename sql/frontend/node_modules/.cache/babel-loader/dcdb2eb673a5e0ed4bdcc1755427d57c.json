{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _constant = require(\"./constant\");\n\nvar _index = _interopRequireDefault(require(\"./index.worker\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n/**\r\n * 创建一个在worker中运行的算法\r\n * @param type 算法类型\r\n */\n\n\nvar createWorker = function createWorker(type) {\n  return function () {\n    var data = [];\n\n    for (var _i = 0; _i < arguments.length; _i++) {\n      data[_i] = arguments[_i];\n    }\n\n    return new Promise(function (resolve, reject) {\n      var worker = new _index.default();\n      worker.postMessage({\n        _algorithmType: type,\n        data: data\n      });\n\n      worker.onmessage = function (event) {\n        var _a = event.data,\n            data = _a.data,\n            _algorithmType = _a._algorithmType;\n\n        if (_constant.MESSAGE.SUCCESS === _algorithmType) {\n          resolve(data);\n        } else {\n          reject();\n        }\n\n        worker.terminate();\n      };\n    });\n  };\n};\n\nvar _default = createWorker;\nexports.default = _default;","map":{"version":3,"sources":["E:/sqlindex2/sql/frontend/node_modules/@antv/algorithm/lib/workers/createWorker.js"],"names":["Object","defineProperty","exports","value","default","_constant","require","_index","_interopRequireDefault","obj","__esModule","createWorker","type","data","_i","arguments","length","Promise","resolve","reject","worker","postMessage","_algorithmType","onmessage","event","_a","MESSAGE","SUCCESS","terminate","_default"],"mappings":"AAAA;;AAEAA,MAAM,CAACC,cAAP,CAAsBC,OAAtB,EAA+B,YAA/B,EAA6C;AAC3CC,EAAAA,KAAK,EAAE;AADoC,CAA7C;AAGAD,OAAO,CAACE,OAAR,GAAkB,KAAK,CAAvB;;AAEA,IAAIC,SAAS,GAAGC,OAAO,CAAC,YAAD,CAAvB;;AAEA,IAAIC,MAAM,GAAGC,sBAAsB,CAACF,OAAO,CAAC,gBAAD,CAAR,CAAnC;;AAEA,SAASE,sBAAT,CAAgCC,GAAhC,EAAqC;AAAE,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AAAEL,IAAAA,OAAO,EAAEK;AAAX,GAArC;AAAwD;AAE/F;AACA;AACA;AACA;;;AACA,IAAIE,YAAY,GAAG,SAASA,YAAT,CAAsBC,IAAtB,EAA4B;AAC7C,SAAO,YAAY;AACjB,QAAIC,IAAI,GAAG,EAAX;;AAEA,SAAK,IAAIC,EAAE,GAAG,CAAd,EAAiBA,EAAE,GAAGC,SAAS,CAACC,MAAhC,EAAwCF,EAAE,EAA1C,EAA8C;AAC5CD,MAAAA,IAAI,CAACC,EAAD,CAAJ,GAAWC,SAAS,CAACD,EAAD,CAApB;AACD;;AAED,WAAO,IAAIG,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5C,UAAIC,MAAM,GAAG,IAAIb,MAAM,CAACH,OAAX,EAAb;AACAgB,MAAAA,MAAM,CAACC,WAAP,CAAmB;AACjBC,QAAAA,cAAc,EAAEV,IADC;AAEjBC,QAAAA,IAAI,EAAEA;AAFW,OAAnB;;AAKAO,MAAAA,MAAM,CAACG,SAAP,GAAmB,UAAUC,KAAV,EAAiB;AAClC,YAAIC,EAAE,GAAGD,KAAK,CAACX,IAAf;AAAA,YACIA,IAAI,GAAGY,EAAE,CAACZ,IADd;AAAA,YAEIS,cAAc,GAAGG,EAAE,CAACH,cAFxB;;AAIA,YAAIjB,SAAS,CAACqB,OAAV,CAAkBC,OAAlB,KAA8BL,cAAlC,EAAkD;AAChDJ,UAAAA,OAAO,CAACL,IAAD,CAAP;AACD,SAFD,MAEO;AACLM,UAAAA,MAAM;AACP;;AAEDC,QAAAA,MAAM,CAACQ,SAAP;AACD,OAZD;AAaD,KApBM,CAAP;AAqBD,GA5BD;AA6BD,CA9BD;;AAgCA,IAAIC,QAAQ,GAAGlB,YAAf;AACAT,OAAO,CAACE,OAAR,GAAkByB,QAAlB","sourcesContent":["\"use strict\";\r\n\r\nObject.defineProperty(exports, \"__esModule\", {\r\n  value: true\r\n});\r\nexports.default = void 0;\r\n\r\nvar _constant = require(\"./constant\");\r\n\r\nvar _index = _interopRequireDefault(require(\"./index.worker\"));\r\n\r\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\r\n\r\n/**\r\n * 创建一个在worker中运行的算法\r\n * @param type 算法类型\r\n */\r\nvar createWorker = function createWorker(type) {\r\n  return function () {\r\n    var data = [];\r\n\r\n    for (var _i = 0; _i < arguments.length; _i++) {\r\n      data[_i] = arguments[_i];\r\n    }\r\n\r\n    return new Promise(function (resolve, reject) {\r\n      var worker = new _index.default();\r\n      worker.postMessage({\r\n        _algorithmType: type,\r\n        data: data\r\n      });\r\n\r\n      worker.onmessage = function (event) {\r\n        var _a = event.data,\r\n            data = _a.data,\r\n            _algorithmType = _a._algorithmType;\r\n\r\n        if (_constant.MESSAGE.SUCCESS === _algorithmType) {\r\n          resolve(data);\r\n        } else {\r\n          reject();\r\n        }\r\n\r\n        worker.terminate();\r\n      };\r\n    });\r\n  };\r\n};\r\n\r\nvar _default = createWorker;\r\nexports.default = _default;"]},"metadata":{},"sourceType":"script"}