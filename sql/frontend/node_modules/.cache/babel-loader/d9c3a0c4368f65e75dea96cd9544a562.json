{"ast":null,"code":"import { isString } from '@antv/util';\nimport { createDom, modifyCSS } from '@antv/dom-util';\nexport var BACKGROUND_STYLE = {\n  opacity: 0.5,\n  fill: '#000'\n};\nexport var ARROW_STYLE = {\n  opacity: 0.5,\n  fill: '#000',\n  r: 5\n};\nexport var TEXT_STYLE = {\n  fill: '#fff',\n  fontSize: 12\n};\n/**\r\n * 缩略趋势图\r\n */\n\nvar TimeBarTooltip =\n/** @class */\nfunction () {\n  function TimeBarTooltip(cfg) {\n    var _a = cfg.x,\n        x = _a === void 0 ? 0 : _a,\n        _b = cfg.y,\n        y = _b === void 0 ? 0 : _b,\n        container = cfg.container,\n        text = cfg.text,\n        _c = cfg.padding,\n        padding = _c === void 0 ? [4, 4, 4, 4] : _c,\n        _d = cfg.className,\n        className = _d === void 0 ? 'g6-component-timebar-tooltip' : _d,\n        _e = cfg.backgroundColor,\n        backgroundColor = _e === void 0 ? '#000' : _e,\n        _f = cfg.textColor,\n        textColor = _f === void 0 ? '#fff' : _f,\n        _g = cfg.opacity,\n        opacity = _g === void 0 ? 0.8 : _g,\n        _h = cfg.fontSize,\n        fontSize = _h === void 0 ? 12 : _h;\n    this.container = container;\n    this.className = className;\n    this.backgroundColor = backgroundColor;\n    this.textColor = textColor;\n    this.x = x;\n    this.y = y;\n    this.text = text;\n    this.padding = padding;\n    this.opacity = opacity;\n    this.fontSize = fontSize;\n    this.render();\n  }\n  /**\r\n   * 首次渲染\r\n   * @private\r\n   */\n\n\n  TimeBarTooltip.prototype.render = function () {\n    var self = this;\n    var className = self.className,\n        x = self.x,\n        y = self.y,\n        backgroundColor = self.backgroundColor,\n        textColor = self.textColor,\n        text = self.text,\n        padding = self.padding,\n        opacity = self.opacity,\n        fontSize = self.fontSize;\n    var parentNode = self.container;\n    var container = createDom(\"<div class='\" + className + \"' style=\\\"position: absolute; width: fit-content; height: fit-content; opacity: \" + opacity + \"\\\"></div>\");\n\n    if (isString(parentNode)) {\n      parentNode = document.getElementById(parentNode);\n    }\n\n    parentNode.appendChild(container);\n    self.parentHeight = parentNode.offsetHeight;\n    self.parentWidth = parentNode.offsetWidth;\n    modifyCSS(container, {\n      visibility: 'hidden',\n      top: 0,\n      left: 0\n    });\n    var background = createDom(\"\\n      <div style='position: absolute; white-space:nowrap; background-color: \" + backgroundColor + \"; font-size: \" + fontSize + \"px; border-radius: 4px; width: fit-content; height: fit-content; color: \" + textColor + \"; padding: \" + padding[0] + \"px \" + padding[1] + \"px \" + padding[2] + \"px \" + padding[3] + \"px'></div>\");\n    background.innerHTML = text;\n    container.appendChild(background);\n    self.backgroundDOM = background;\n    var arrow = createDom(\"<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid \" + backgroundColor + \"'></div>\");\n    container.appendChild(arrow);\n    self.arrowDOM = arrow;\n    self.container = container;\n  };\n\n  TimeBarTooltip.prototype.show = function (cfg) {\n    var self = this;\n    var text = cfg.text,\n        x = cfg.x,\n        y = cfg.y,\n        clientX = cfg.clientX,\n        clientY = cfg.clientY;\n    self.backgroundDOM.innerHTML = text;\n    var backgroundWidth = self.backgroundDOM.offsetWidth;\n    var backgroundHeight = self.backgroundDOM.offsetHeight;\n    var arrowWidth = self.arrowDOM.offsetWidth;\n    var arrowHeight = self.arrowDOM.offsetHeight;\n    modifyCSS(self.container, {\n      top: -backgroundHeight - arrowHeight + \"px\",\n      left: x + \"px\",\n      visibility: 'visible'\n    });\n    modifyCSS(self.backgroundDOM, {\n      marginLeft: -backgroundWidth / 2 + \"px\"\n    });\n    modifyCSS(self.arrowDOM, {\n      marginLeft: -arrowWidth / 2 + \"px\",\n      top: backgroundHeight + \"px\"\n    });\n    var left = x - backgroundWidth / 2;\n    var right = x + backgroundWidth / 2;\n\n    if (left < 0) {\n      modifyCSS(self.backgroundDOM, {\n        marginLeft: -backgroundWidth / 2 - left + \"px\"\n      });\n    } else if (right > self.parentWidth) {\n      modifyCSS(self.backgroundDOM, {\n        marginLeft: -backgroundWidth / 2 - right + self.parentWidth + 12 + \"px\"\n      });\n    }\n  };\n\n  TimeBarTooltip.prototype.hide = function () {\n    modifyCSS(this.container, {\n      top: 0,\n      left: 0,\n      visibility: 'hidden'\n    });\n  };\n\n  return TimeBarTooltip;\n}();\n\nexport default TimeBarTooltip;","map":{"version":3,"sources":["E:/sqlindex2/sql/frontend/node_modules/@antv/g6-plugin/es/timeBar/timeBarTooltip.js"],"names":["isString","createDom","modifyCSS","BACKGROUND_STYLE","opacity","fill","ARROW_STYLE","r","TEXT_STYLE","fontSize","TimeBarTooltip","cfg","_a","x","_b","y","container","text","_c","padding","_d","className","_e","backgroundColor","_f","textColor","_g","_h","render","prototype","self","parentNode","document","getElementById","appendChild","parentHeight","offsetHeight","parentWidth","offsetWidth","visibility","top","left","background","innerHTML","backgroundDOM","arrow","arrowDOM","show","clientX","clientY","backgroundWidth","backgroundHeight","arrowWidth","arrowHeight","marginLeft","right","hide"],"mappings":"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","sourcesContent":["import { isString } from '@antv/util';\r\nimport { createDom, modifyCSS } from '@antv/dom-util';\r\nexport var BACKGROUND_STYLE = {\r\n  opacity: 0.5,\r\n  fill: '#000'\r\n};\r\nexport var ARROW_STYLE = {\r\n  opacity: 0.5,\r\n  fill: '#000',\r\n  r: 5\r\n};\r\nexport var TEXT_STYLE = {\r\n  fill: '#fff',\r\n  fontSize: 12\r\n};\r\n/**\r\n * 缩略趋势图\r\n */\r\n\r\nvar TimeBarTooltip =\r\n/** @class */\r\nfunction () {\r\n  function TimeBarTooltip(cfg) {\r\n    var _a = cfg.x,\r\n        x = _a === void 0 ? 0 : _a,\r\n        _b = cfg.y,\r\n        y = _b === void 0 ? 0 : _b,\r\n        container = cfg.container,\r\n        text = cfg.text,\r\n        _c = cfg.padding,\r\n        padding = _c === void 0 ? [4, 4, 4, 4] : _c,\r\n        _d = cfg.className,\r\n        className = _d === void 0 ? 'g6-component-timebar-tooltip' : _d,\r\n        _e = cfg.backgroundColor,\r\n        backgroundColor = _e === void 0 ? '#000' : _e,\r\n        _f = cfg.textColor,\r\n        textColor = _f === void 0 ? '#fff' : _f,\r\n        _g = cfg.opacity,\r\n        opacity = _g === void 0 ? 0.8 : _g,\r\n        _h = cfg.fontSize,\r\n        fontSize = _h === void 0 ? 12 : _h;\r\n    this.container = container;\r\n    this.className = className;\r\n    this.backgroundColor = backgroundColor;\r\n    this.textColor = textColor;\r\n    this.x = x;\r\n    this.y = y;\r\n    this.text = text;\r\n    this.padding = padding;\r\n    this.opacity = opacity;\r\n    this.fontSize = fontSize;\r\n    this.render();\r\n  }\r\n  /**\r\n   * 首次渲染\r\n   * @private\r\n   */\r\n\r\n\r\n  TimeBarTooltip.prototype.render = function () {\r\n    var self = this;\r\n    var className = self.className,\r\n        x = self.x,\r\n        y = self.y,\r\n        backgroundColor = self.backgroundColor,\r\n        textColor = self.textColor,\r\n        text = self.text,\r\n        padding = self.padding,\r\n        opacity = self.opacity,\r\n        fontSize = self.fontSize;\r\n    var parentNode = self.container;\r\n    var container = createDom(\"<div class='\" + className + \"' style=\\\"position: absolute; width: fit-content; height: fit-content; opacity: \" + opacity + \"\\\"></div>\");\r\n\r\n    if (isString(parentNode)) {\r\n      parentNode = document.getElementById(parentNode);\r\n    }\r\n\r\n    parentNode.appendChild(container);\r\n    self.parentHeight = parentNode.offsetHeight;\r\n    self.parentWidth = parentNode.offsetWidth;\r\n    modifyCSS(container, {\r\n      visibility: 'hidden',\r\n      top: 0,\r\n      left: 0\r\n    });\r\n    var background = createDom(\"\\n      <div style='position: absolute; white-space:nowrap; background-color: \" + backgroundColor + \"; font-size: \" + fontSize + \"px; border-radius: 4px; width: fit-content; height: fit-content; color: \" + textColor + \"; padding: \" + padding[0] + \"px \" + padding[1] + \"px \" + padding[2] + \"px \" + padding[3] + \"px'></div>\");\r\n    background.innerHTML = text;\r\n    container.appendChild(background);\r\n    self.backgroundDOM = background;\r\n    var arrow = createDom(\"<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid \" + backgroundColor + \"'></div>\");\r\n    container.appendChild(arrow);\r\n    self.arrowDOM = arrow;\r\n    self.container = container;\r\n  };\r\n\r\n  TimeBarTooltip.prototype.show = function (cfg) {\r\n    var self = this;\r\n    var text = cfg.text,\r\n        x = cfg.x,\r\n        y = cfg.y,\r\n        clientX = cfg.clientX,\r\n        clientY = cfg.clientY;\r\n    self.backgroundDOM.innerHTML = text;\r\n    var backgroundWidth = self.backgroundDOM.offsetWidth;\r\n    var backgroundHeight = self.backgroundDOM.offsetHeight;\r\n    var arrowWidth = self.arrowDOM.offsetWidth;\r\n    var arrowHeight = self.arrowDOM.offsetHeight;\r\n    modifyCSS(self.container, {\r\n      top: -backgroundHeight - arrowHeight + \"px\",\r\n      left: x + \"px\",\r\n      visibility: 'visible'\r\n    });\r\n    modifyCSS(self.backgroundDOM, {\r\n      marginLeft: -backgroundWidth / 2 + \"px\"\r\n    });\r\n    modifyCSS(self.arrowDOM, {\r\n      marginLeft: -arrowWidth / 2 + \"px\",\r\n      top: backgroundHeight + \"px\"\r\n    });\r\n    var left = x - backgroundWidth / 2;\r\n    var right = x + backgroundWidth / 2;\r\n\r\n    if (left < 0) {\r\n      modifyCSS(self.backgroundDOM, {\r\n        marginLeft: -backgroundWidth / 2 - left + \"px\"\r\n      });\r\n    } else if (right > self.parentWidth) {\r\n      modifyCSS(self.backgroundDOM, {\r\n        marginLeft: -backgroundWidth / 2 - right + self.parentWidth + 12 + \"px\"\r\n      });\r\n    }\r\n  };\r\n\r\n  TimeBarTooltip.prototype.hide = function () {\r\n    modifyCSS(this.container, {\r\n      top: 0,\r\n      left: 0,\r\n      visibility: 'hidden'\r\n    });\r\n  };\r\n\r\n  return TimeBarTooltip;\r\n}();\r\n\r\nexport default TimeBarTooltip;"]},"metadata":{},"sourceType":"module"}