{"ast":null,"code":"var _jsxFileName = \"D:\\\\SQL\\\\sqlindex2\\\\sql\\\\frontend\\\\src\\\\pages\\\\khachhang\\\\components\\\\profile\\\\components\\\\Bill.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$(),\n    _s3 = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { Table, Modal, Button, Input, Divider, Card, Avatar, notification } from \"antd\";\nimport { CheckCircleTwoTone } from \"@ant-design/icons\";\nimport axios from \"axios\";\nimport moment from \"moment\";\nimport { FaStar } from \"react-icons/fa\";\nimport \"./Bill.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ReviewModal({\n  MaSP,\n  MaKH\n}) {\n  _s();\n\n  const [isModalVisible, setIsModalVisible] = useState(false);\n  const [rating, setRating] = useState(null);\n  const [hover, setHover] = useState(null);\n  const [textRating, setTextRating] = useState(\"\");\n  const {\n    TextArea\n  } = Input;\n\n  const showModal = () => {\n    setIsModalVisible(true);\n  };\n\n  const handleOk = () => {\n    axios.post(\"http://localhost:5000/api/rating/\" + MaKH + \"/\" + MaSP, JSON.stringify({\n      DiemDanhGia: rating,\n      MoTa: textRating\n    }), {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(res => {\n      console.log(res.data);\n      notification.open({\n        message: \"Thông báo\",\n        description: \"Đánh giá thành công thành công!\",\n        icon: /*#__PURE__*/_jsxDEV(CheckCircleTwoTone, {\n          twoToneColor: \"#52c41a\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 16\n        }, this)\n      });\n    }).catch(err => console.log(err));\n    setIsModalVisible(false);\n  };\n\n  const handleCancel = () => {\n    setIsModalVisible(false);\n  };\n\n  const onChange = e => {\n    setTextRating(e.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Button, {\n      type: \"primary\",\n      onClick: showModal,\n      children: \"Nh\\u1EADn x\\xE9t\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u0110\\xE1nh gi\\xE1\",\n      visible: isModalVisible,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [...Array(5)].map((star, i) => {\n          const ratingValue = i + 1;\n          return /*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"radio\",\n              name: \"rating\",\n              value: ratingValue,\n              onClick: () => setRating(ratingValue)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 71,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(FaStar, {\n              className: \"star\",\n              color: ratingValue <= (hover || rating) ? \"#ffc107\" : \"#e4e5e9\",\n              size: 50,\n              onMouseEnter: () => setHover(ratingValue),\n              onMouseLeave: () => setHover(null)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 15\n          }, this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n        rows: 4,\n        placeholder: \"V\\xEC sao b\\u1EA1n th\\xEDch s\\u1EA3n ph\\u1EA9m\",\n        onChange: onChange,\n        maxLength: 255,\n        showCount: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ReviewModal, \"MptarQRh9B9CxoQfEYWalwaCsg8=\");\n\n_c = ReviewModal;\n\nfunction CTHDModal({\n  MaHD,\n  isOpen,\n  setIsOpen\n}) {\n  _s2();\n\n  const [products, setProducts] = useState([]);\n  useEffect(() => {\n    axios.get(\"http://localhost:5000/api/cthd/\" + MaHD).then(res => {\n      setProducts(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [MaHD]);\n\n  const handleOk = () => {\n    setIsOpen(false);\n  };\n\n  const handleCancel = () => {\n    setIsOpen(false);\n  };\n\n  const columns = [{\n    title: \"Mã hóa đơn\",\n    dataIndex: \"MaHD\",\n    key: \"MaHD\"\n  }, {\n    title: \"Mã sản phẩm\",\n    dataIndex: \"MaSP\",\n    key: \"MaSP\",\n    render: (_, record) => {\n      return /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/productdetail/\" + text,\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 16\n      }, this);\n    }\n  }, {\n    title: \"Số lượng\",\n    dataIndex: \"SoLuong\",\n    key: \"SoLuong\"\n  }, {\n    title: \"Thành tiền\",\n    dataIndex: \"ThanhTien\",\n    key: \"ThanhTien\",\n    render: text => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [text, \".000 \\u0110\\u1ED3ng\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Modal, {\n      title: \"\\u0110\\xE1nh gi\\xE1\",\n      visible: isOpen,\n      onOk: handleOk,\n      onCancel: handleCancel,\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        columns: columns,\n        dataSource: products,\n        pagination: false\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 152,\n    columnNumber: 5\n  }, this);\n}\n\n_s2(CTHDModal, \"f86L6rLANGURv6GE6gupp7+oOp4=\");\n\n_c2 = CTHDModal;\n\nconst Bill = () => {\n  _s3();\n\n  const [maHD, setMaHD] = useState(-1);\n  const [hoaDon, setHoaDon] = useState([]);\n  const [isOpen, setIsOpen] = useState(false);\n  const [products, setProducts] = useState([]);\n  const {\n    Meta\n  } = Card;\n  useEffect(() => {\n    const id = JSON.parse(window.localStorage.getItem(\"KH\")).MaKH;\n    axios.get(\"http://localhost:5000/api/hdkh/\" + id).then(res => {\n      setHoaDon(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n    axios.get(\"http://localhost:5000/api/spkh/\" + id).then(res => {\n      setProducts(res.data);\n    }).catch(err => {\n      console.log(err);\n    });\n  }, []);\n\n  const onClickHD = text => {\n    setIsOpen(true);\n    setMaHD(text);\n  };\n\n  const columns = [{\n    title: \"Mã hóa đơn\",\n    dataIndex: \"MaHD\",\n    key: \"MaHD\",\n    render: text => {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => onClickHD(text),\n        children: text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 16\n      }, this);\n    }\n  }, {\n    title: \"Ngày mua\",\n    dataIndex: \"NgayLap\",\n    key: \"NgayLap\",\n    render: text => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: moment(text).format(\"DD/MM/YYYY\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 16\n      }, this);\n    }\n  }, {\n    title: \"Tổng tiền\",\n    dataIndex: \"TongTien\",\n    key: \"TongTien\",\n    render: text => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [text, \".000 \\u0110\\u1ED3ng\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 25\n    }, this)\n  }, {\n    title: \"Phí vận chuyển\",\n    dataIndex: \"PhiVC\",\n    key: \"PhiVC\",\n    render: text => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [text, \".000 \\u0110\\u1ED3ng\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 25\n    }, this)\n  }, {\n    title: \"Thành tiền\",\n    dataIndex: \"ThanhTienHD\",\n    key: \"ThanhTienHD\",\n    render: text => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [text, \".000 \\u0110\\u1ED3ng\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 25\n    }, this)\n  }, {\n    title: \"Trạng thái đơn hàng\",\n    key: \"TinhTrang\",\n    dataIndex: \"TinhTrang\"\n  }];\n  const MaKH = JSON.parse(window.localStorage.getItem(\"KH\")).MaKH;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Table, {\n      columns: columns,\n      dataSource: hoaDon\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(CTHDModal, {\n      MaHD: maHD,\n      isOpen: isOpen,\n      setIsOpen: setIsOpen\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"S\\u1EA3n ph\\u1EA9m b\\u1EA1n \\u0111\\xE3 mua\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 7\n    }, this), products.length !== 0 ? products.map(item => {\n      return /*#__PURE__*/_jsxDEV(Card, {\n        style: {\n          width: 300,\n          marginTop: 16,\n          marginLeft: 40\n        },\n        children: [/*#__PURE__*/_jsxDEV(Meta, {\n          avatar: /*#__PURE__*/_jsxDEV(Avatar, {\n            src: item.url\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 253,\n            columnNumber: 29\n          }, this),\n          title: item.TenSP\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Gi\\xE1: \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: [item.ThanhTienSP, \" 000\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 22\n          }, this), \" \\u0110\\u1ED3ng\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(ReviewModal, {\n          MaSP: item.MaSP,\n          MaKH: MaKH\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 13\n      }, this);\n    }) : /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 244,\n    columnNumber: 5\n  }, this);\n};\n\n_s3(Bill, \"vVrOoXDUL1PKEZY0a9ltzSdN+rU=\");\n\n_c3 = Bill;\nexport default Bill;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ReviewModal\");\n$RefreshReg$(_c2, \"CTHDModal\");\n$RefreshReg$(_c3, \"Bill\");","map":{"version":3,"sources":["D:/SQL/sqlindex2/sql/frontend/src/pages/khachhang/components/profile/components/Bill.js"],"names":["useState","useEffect","Link","Table","Modal","Button","Input","Divider","Card","Avatar","notification","CheckCircleTwoTone","axios","moment","FaStar","ReviewModal","MaSP","MaKH","isModalVisible","setIsModalVisible","rating","setRating","hover","setHover","textRating","setTextRating","TextArea","showModal","handleOk","post","JSON","stringify","DiemDanhGia","MoTa","headers","then","res","console","log","data","open","message","description","icon","catch","err","handleCancel","onChange","e","target","value","Array","map","star","i","ratingValue","CTHDModal","MaHD","isOpen","setIsOpen","products","setProducts","get","columns","title","dataIndex","key","render","_","record","text","Bill","maHD","setMaHD","hoaDon","setHoaDon","Meta","id","parse","window","localStorage","getItem","onClickHD","format","length","item","width","marginTop","marginLeft","url","TenSP","ThanhTienSP"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Table, Modal, Button, Input, Divider, Card, Avatar, notification } from \"antd\";\r\nimport { CheckCircleTwoTone } from \"@ant-design/icons\";\r\nimport axios from \"axios\";\r\nimport moment from \"moment\";\r\nimport { FaStar } from \"react-icons/fa\";\r\nimport \"./Bill.css\";\r\n\r\nfunction ReviewModal({ MaSP, MaKH }) {\r\n  const [isModalVisible, setIsModalVisible] = useState(false);\r\n  const [rating, setRating] = useState(null);\r\n  const [hover, setHover] = useState(null);\r\n  const [textRating, setTextRating] = useState(\"\");\r\n\r\n  const { TextArea } = Input;\r\n\r\n  const showModal = () => {\r\n    setIsModalVisible(true);\r\n  };\r\n\r\n  const handleOk = () => {\r\n    axios\r\n      .post(\r\n        \"http://localhost:5000/api/rating/\" + MaKH + \"/\" + MaSP,\r\n        JSON.stringify({\r\n          DiemDanhGia: rating,\r\n          MoTa: textRating,\r\n        }),\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n        }\r\n      )\r\n      .then((res) => {console.log(res.data);\r\n       notification.open({\r\n         message: \"Thông báo\",\r\n         description: \"Đánh giá thành công thành công!\",\r\n         icon: <CheckCircleTwoTone twoToneColor=\"#52c41a\" />,\r\n       });})\r\n      .catch((err) => console.log(err));\r\n    \r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsModalVisible(false);\r\n  };\r\n\r\n  const onChange = (e) => {\r\n    setTextRating(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Button type=\"primary\" onClick={showModal}>\r\n        Nhận xét\r\n      </Button>\r\n      <Modal\r\n        title=\"Đánh giá\"\r\n        visible={isModalVisible}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n      >\r\n        <div>\r\n          {[...Array(5)].map((star, i) => {\r\n            const ratingValue = i + 1;\r\n            return (\r\n              <label>\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"rating\"\r\n                  value={ratingValue}\r\n                  onClick={() => setRating(ratingValue)}\r\n                />\r\n                <FaStar\r\n                  className=\"star\"\r\n                  color={\r\n                    ratingValue <= (hover || rating) ? \"#ffc107\" : \"#e4e5e9\"\r\n                  }\r\n                  size={50}\r\n                  onMouseEnter={() => setHover(ratingValue)}\r\n                  onMouseLeave={() => setHover(null)}\r\n                />\r\n              </label>\r\n            );\r\n          })}\r\n        </div>\r\n        <TextArea\r\n          rows={4}\r\n          placeholder=\"Vì sao bạn thích sản phẩm\"\r\n          onChange={onChange}\r\n          maxLength={255}\r\n          showCount\r\n        />\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction CTHDModal({ MaHD, isOpen, setIsOpen }) {\r\n  const [products, setProducts] = useState([]);\r\n\r\n  useEffect(() => {\r\n    axios\r\n      .get(\"http://localhost:5000/api/cthd/\" + MaHD)\r\n      .then((res) => {\r\n        setProducts(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, [MaHD]);\r\n\r\n  const handleOk = () => {\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setIsOpen(false);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Mã hóa đơn\",\r\n      dataIndex: \"MaHD\",\r\n      key: \"MaHD\",\r\n    },\r\n    {\r\n      title: \"Mã sản phẩm\",\r\n      dataIndex: \"MaSP\",\r\n      key: \"MaSP\",\r\n      render: (_, record) => {\r\n        return <Link to={\"/productdetail/\" + text}>{text}</Link>;\r\n      },\r\n    },\r\n    {\r\n      title: \"Số lượng\",\r\n      dataIndex: \"SoLuong\",\r\n      key: \"SoLuong\",\r\n    },\r\n    {\r\n      title: \"Thành tiền\",\r\n      dataIndex: \"ThanhTien\",\r\n      key: \"ThanhTien\",\r\n      render: (text) => <div>{text}.000 Đồng</div>,\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div>\r\n      <Modal\r\n        title=\"Đánh giá\"\r\n        visible={isOpen}\r\n        onOk={handleOk}\r\n        onCancel={handleCancel}\r\n      >\r\n        <Table columns={columns} dataSource={products} pagination={false} />\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Bill = () => {\r\n  const [maHD, setMaHD] = useState(-1);\r\n  const [hoaDon, setHoaDon] = useState([]);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const { Meta } = Card;\r\n\r\n  useEffect(() => {\r\n    const id = JSON.parse(window.localStorage.getItem(\"KH\")).MaKH;\r\n    axios\r\n      .get(\"http://localhost:5000/api/hdkh/\" + id)\r\n      .then((res) => {\r\n        setHoaDon(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n\r\n    axios\r\n      .get(\"http://localhost:5000/api/spkh/\" + id)\r\n      .then((res) => {\r\n        setProducts(res.data);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  const onClickHD = (text) => {\r\n    setIsOpen(true);\r\n    setMaHD(text);\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Mã hóa đơn\",\r\n      dataIndex: \"MaHD\",\r\n      key: \"MaHD\",\r\n      render: (text) => {\r\n        return <Button onClick={() => onClickHD(text)}>{text}</Button>;\r\n      },\r\n    },\r\n    {\r\n      title: \"Ngày mua\",\r\n      dataIndex: \"NgayLap\",\r\n      key: \"NgayLap\",\r\n      render: (text) => {\r\n        return <div>{moment(text).format(\"DD/MM/YYYY\")}</div>;\r\n      },\r\n    },\r\n    {\r\n      title: \"Tổng tiền\",\r\n      dataIndex: \"TongTien\",\r\n      key: \"TongTien\",\r\n      render: (text) => <div>{text}.000 Đồng</div>,\r\n    },\r\n    {\r\n      title: \"Phí vận chuyển\",\r\n      dataIndex: \"PhiVC\",\r\n      key: \"PhiVC\",\r\n      render: (text) => <div>{text}.000 Đồng</div>,\r\n    },\r\n    {\r\n      title: \"Thành tiền\",\r\n      dataIndex: \"ThanhTienHD\",\r\n      key: \"ThanhTienHD\",\r\n      render: (text) => <div>{text}.000 Đồng</div>,\r\n    },\r\n    {\r\n      title: \"Trạng thái đơn hàng\",\r\n      key: \"TinhTrang\",\r\n      dataIndex: \"TinhTrang\",\r\n    },\r\n  ];\r\n\r\n  const MaKH = JSON.parse(window.localStorage.getItem(\"KH\")).MaKH;\r\n\r\n  return (\r\n    <div>\r\n      <Table columns={columns} dataSource={hoaDon} />\r\n      <CTHDModal MaHD={maHD} isOpen={isOpen} setIsOpen={setIsOpen} />\r\n      <Divider />\r\n      <h2>Sản phẩm bạn đã mua</h2>\r\n      {products.length !== 0 ? (\r\n        products.map((item) => {\r\n          return (\r\n            <Card style={{ width: 300, marginTop: 16, marginLeft: 40 }}>\r\n              <Meta avatar={<Avatar src={item.url} />} title={item.TenSP} />\r\n              <p>\r\n                Giá: <b>{item.ThanhTienSP} 000</b> Đồng\r\n              </p>\r\n              <ReviewModal MaSP={item.MaSP} MaKH={MaKH} />\r\n            </Card>\r\n          );\r\n        })\r\n      ) : (\r\n        <div></div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Bill;\r\n"]},"metadata":{},"sourceType":"module"}