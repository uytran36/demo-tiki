{"ast":null,"code":"import { __assign, __extends } from \"tslib\";\nimport { clone, each } from '@antv/util';\nimport GroupComponent from '../abstract/group-component';\nimport { regionToBBox } from '../util/util';\n\nvar RegionFilterAnnotation =\n/** @class */\nfunction (_super) {\n  __extends(RegionFilterAnnotation, _super);\n\n  function RegionFilterAnnotation() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n  /**\r\n   * 默认的配置项\r\n   * @returns {object} 默认的配置项\r\n   */\n\n\n  RegionFilterAnnotation.prototype.getDefaultCfg = function () {\n    var cfg = _super.prototype.getDefaultCfg.call(this);\n\n    return __assign(__assign({}, cfg), {\n      name: 'annotation',\n      type: 'regionFilter',\n      locationType: 'region',\n      start: null,\n      end: null,\n      color: null,\n      shape: []\n    });\n  };\n\n  RegionFilterAnnotation.prototype.renderInner = function (group) {\n    var _this = this;\n\n    var start = this.get('start');\n    var end = this.get('end'); // 1. add region layer\n\n    var layer = this.addGroup(group, {\n      id: this.getElementId('region-filter'),\n      capture: false\n    }); // 2. clone shape & color it\n\n    each(this.get('shapes'), function (shape, shapeIdx) {\n      var type = shape.get('type');\n      var attrs = clone(shape.attr());\n\n      _this.adjustShapeAttrs(attrs);\n\n      _this.addShape(layer, {\n        id: _this.getElementId(\"shape-\" + type + \"-\" + shapeIdx),\n        capture: false,\n        type: type,\n        attrs: attrs\n      });\n    }); // 3. clip\n\n    var clipBBox = regionToBBox({\n      start: start,\n      end: end\n    });\n    layer.setClip({\n      type: 'rect',\n      attrs: {\n        x: clipBBox.minX,\n        y: clipBBox.minY,\n        width: clipBBox.width,\n        height: clipBBox.height\n      }\n    });\n  };\n\n  RegionFilterAnnotation.prototype.adjustShapeAttrs = function (attr) {\n    var color = this.get('color');\n\n    if (attr.fill) {\n      attr.fill = attr.fillStyle = color;\n    }\n\n    attr.stroke = attr.strokeStyle = color;\n  };\n\n  return RegionFilterAnnotation;\n}(GroupComponent);\n\nexport default RegionFilterAnnotation;","map":{"version":3,"sources":["../../src/annotation/region-filter.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import { __assign, __extends } from \"tslib\";\r\nimport { clone, each } from '@antv/util';\r\nimport GroupComponent from '../abstract/group-component';\r\nimport { regionToBBox } from '../util/util';\r\nvar RegionFilterAnnotation = /** @class */ (function (_super) {\r\n    __extends(RegionFilterAnnotation, _super);\r\n    function RegionFilterAnnotation() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    /**\r\n     * 默认的配置项\r\n     * @returns {object} 默认的配置项\r\n     */\r\n    RegionFilterAnnotation.prototype.getDefaultCfg = function () {\r\n        var cfg = _super.prototype.getDefaultCfg.call(this);\r\n        return __assign(__assign({}, cfg), { name: 'annotation', type: 'regionFilter', locationType: 'region', start: null, end: null, color: null, shape: [] });\r\n    };\r\n    RegionFilterAnnotation.prototype.renderInner = function (group) {\r\n        var _this = this;\r\n        var start = this.get('start');\r\n        var end = this.get('end');\r\n        // 1. add region layer\r\n        var layer = this.addGroup(group, {\r\n            id: this.getElementId('region-filter'),\r\n            capture: false,\r\n        });\r\n        // 2. clone shape & color it\r\n        each(this.get('shapes'), function (shape, shapeIdx) {\r\n            var type = shape.get('type');\r\n            var attrs = clone(shape.attr());\r\n            _this.adjustShapeAttrs(attrs);\r\n            _this.addShape(layer, {\r\n                id: _this.getElementId(\"shape-\" + type + \"-\" + shapeIdx),\r\n                capture: false,\r\n                type: type,\r\n                attrs: attrs,\r\n            });\r\n        });\r\n        // 3. clip\r\n        var clipBBox = regionToBBox({ start: start, end: end });\r\n        layer.setClip({\r\n            type: 'rect',\r\n            attrs: {\r\n                x: clipBBox.minX,\r\n                y: clipBBox.minY,\r\n                width: clipBBox.width,\r\n                height: clipBBox.height,\r\n            },\r\n        });\r\n    };\r\n    RegionFilterAnnotation.prototype.adjustShapeAttrs = function (attr) {\r\n        var color = this.get('color');\r\n        if (attr.fill) {\r\n            attr.fill = attr.fillStyle = color;\r\n        }\r\n        attr.stroke = attr.strokeStyle = color;\r\n    };\r\n    return RegionFilterAnnotation;\r\n}(GroupComponent));\r\nexport default RegionFilterAnnotation;\r\n//# sourceMappingURL=region-filter.js.map"]},"metadata":{},"sourceType":"module"}