{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nimport G6 from '@antv/g6';\nimport { deepClone, isType } from '../util/utils';\nimport { defaultMinimapCfg } from './constants';\nexport var getGraphSize = function (width, height, container) {\n  var CANVAS_WIDTH;\n  var CANVAS_HEIGHT;\n\n  if (container && container.current) {\n    CANVAS_WIDTH = container.current.offsetWidth;\n    CANVAS_HEIGHT = container.current.offsetHeight || 500;\n  }\n\n  if (!width && !CANVAS_WIDTH || !height && !CANVAS_HEIGHT) {\n    console.warn('请为 Graph 指定 width 与 height！否则将使用默认值 500 * 500');\n    return [500, 500];\n  }\n\n  return [width || CANVAS_WIDTH || 500, height || CANVAS_HEIGHT || 500];\n}; // 展开&折叠事件\n\nexport var bindDefaultEvents = function (graph) {\n  var onClick = function (e) {\n    var item = e.item;\n\n    if (e.target.get('name') === 'collapse-icon') {\n      graph.updateItem(item, {\n        collapsed: !item.getModel().collapsed\n      });\n      graph.layout();\n    }\n  };\n\n  graph.on('node:click', function (e) {\n    onClick(e);\n  });\n  graph.on('node:touchstart', function (e) {\n    onClick(e);\n  });\n};\n\nvar uuid = function () {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    return v.toString(16);\n  });\n}; // 同一页面存在多 graph 时需要指定 graphId\n\n\nexport var getGraphId = function (graph) {\n  if (graph.current) {\n    return graph.current;\n  }\n\n  graph.current = \"IndentedTreeGraph-\" + uuid();\n  return graph.current;\n};\nexport var renderGraph = function (graph, data, autoFit, adjustLayout) {\n  if (adjustLayout === void 0) {\n    adjustLayout = true;\n  }\n\n  var originData = deepClone(data);\n  graph.data(originData);\n  graph.render(); // 关闭局部刷新，各种 bug\n\n  graph.get('canvas').set('localRefresh', false);\n\n  if (adjustLayout) {\n    autoFit ? graph.fitView() : graph.fitCenter();\n  }\n};\nexport var processMinimap = function (cfg, graph) {\n  if (cfg === void 0) {\n    cfg = {};\n  }\n\n  if (!graph || graph.destroyed) return;\n\n  if (cfg.show) {\n    var curMminimapCfg = Object.assign(defaultMinimapCfg, cfg);\n    var minimap = new G6.Minimap(__assign({}, curMminimapCfg));\n    graph.addPlugin(minimap);\n    return minimap;\n  }\n\n  return null;\n};\n/**\n * min ma\n */\n\nexport var getMarkerPosition = function (direction, size) {\n  if (direction === void 0) {\n    direction = 'right';\n  }\n\n  var width = size[0],\n      height = size[1];\n  var x = 0;\n  var y = 0;\n\n  switch (direction) {\n    case 'top':\n      x = width / 2;\n      y = 0;\n      break;\n\n    case 'right':\n      x = width;\n      y = height / 2;\n      break;\n\n    case 'bottom':\n      x = width / 2;\n      y = height;\n      break;\n\n    case 'left':\n      x = 0;\n      y = height / 2;\n      break;\n  }\n\n  return {\n    x: x,\n    y: y\n  };\n};\nexport var bindSourceMapCollapseEvents = function (graph, fullData) {\n  var controlData = deepClone(fullData);\n\n  var onClick = function (e) {\n    var _a;\n\n    if (e.target.get('name') === 'collapse-icon') {\n      var item = e.item;\n      var collapsed = item.getModel().collapsed;\n\n      if (!isType(collapsed, 'Boolean')) {\n        // @ts-ignore\n        collapsed = (_a = item._cfg.group.getChildren().find(function (item) {\n          return item.get('name') === 'main-box';\n        })) === null || _a === void 0 ? void 0 : _a.attr('defaultCollapsed');\n      } // @ts-ignore\n\n\n      var marker = e.item._cfg.group.getChildren().find(function (item) {\n        return item.cfg.type === 'marker';\n      });\n\n      var _b = (fullData !== null && fullData !== void 0 ? fullData : {}).edges,\n          fullEdges_1 = _b === void 0 ? [] : _b;\n      var nodeId = item.getModel().id;\n      var targetNodeIds_1 = [];\n      var updateItems_1 = [];\n      var updateIds_1 = [];\n\n      var getLinkedId_1 = function (currentId) {\n        fullEdges_1.forEach(function (edge) {\n          var source = edge.source,\n              target = edge.target;\n\n          if (source === currentId) {\n            targetNodeIds_1.push(target);\n            getLinkedId_1(target);\n          }\n        });\n      };\n\n      getLinkedId_1(nodeId);\n\n      if (!collapsed) {\n        // collapse\n        graph.findAll('node', function (node) {\n          return targetNodeIds_1.includes(node.get('id'));\n        }).forEach(function (node) {\n          return graph.hideItem(node);\n        });\n        controlData.nodes.forEach(function (node) {\n          var _a = node.collapsedLevel,\n              collapsedLevel = _a === void 0 ? 0 : _a,\n              id = node.id;\n\n          if (targetNodeIds_1.includes(id)) {\n            node.collapsedLevel = collapsedLevel + 1;\n          }\n        });\n      } else {\n        // expand\n        graph.findAll('node', function (node) {\n          var collapsedLevel = controlData.nodes.find(function (item) {\n            return item.id === node.get('id');\n          }).collapsedLevel;\n          return targetNodeIds_1.includes(node.get('id')) && (!collapsedLevel || collapsedLevel < 2);\n        }).forEach(function (node) {\n          return graph.showItem(node);\n        });\n        controlData.nodes.forEach(function (node) {\n          var _a = node.collapsedLevel,\n              collapsedLevel = _a === void 0 ? 0 : _a,\n              id = node.id;\n\n          if (targetNodeIds_1.includes(id)) {\n            node.collapsedLevel = collapsedLevel - 1;\n          }\n        });\n      }\n\n      fullEdges_1.forEach(function (edge) {\n        var source = edge.source,\n            target = edge.target;\n\n        if (targetNodeIds_1.includes(target)) {\n          updateIds_1.push(source);\n        }\n      });\n      updateIds_1 = Array.from(new Set(updateIds_1));\n      updateIds_1.forEach(function (id) {\n        updateItems_1.push(graph.find('node', function (node) {\n          return node.get('id') === id;\n        }));\n      });\n      updateItems_1.forEach(function (nodeItem) {\n        graph.updateItem(nodeItem, {\n          collapsed: !nodeItem.getModel().collapsed\n        });\n        graph.refreshItem(nodeItem);\n      });\n    }\n  };\n\n  graph.on('node:click', function (e) {\n    onClick(e);\n  });\n  graph.on('node:touchstart', function (e) {\n    onClick(e);\n  });\n};\n/**\n * padding | margin 按 CSS 规则转换\n */\n\nexport var getCssPadding = function (padding) {\n  if (typeof padding === 'number') {\n    return [padding, padding, padding, padding];\n  }\n\n  var result = [];\n\n  switch (padding.length) {\n    case 1:\n      result = [padding[0], padding[0], padding[0], padding[0]];\n      break;\n\n    case 2:\n      result = [padding[0], padding[1], padding[0], padding[1]];\n      break;\n\n    case 3:\n      result = [padding[0], padding[1], padding[2], padding[1]];\n      break;\n\n    case 4:\n      result = padding;\n      break;\n\n    default:\n      break;\n  }\n\n  return result;\n}; // 默认箭头样式\n\nexport var getArrowCfg = function (arrowCfg, edge) {\n  if (!arrowCfg) {\n    return;\n  }\n\n  if (typeof arrowCfg === 'function') {\n    return arrowCfg(edge);\n  }\n\n  if ((arrowCfg === null || arrowCfg === void 0 ? void 0 : arrowCfg.show) === false) {\n    return;\n  }\n\n  var _a = arrowCfg.type,\n      type = _a === void 0 ? 'vee' : _a,\n      _b = arrowCfg.d,\n      d = _b === void 0 ? 0 : _b,\n      _c = arrowCfg.size,\n      size = _c === void 0 ? 10 : _c;\n  return __assign({\n    path: G6.Arrow[type](size, size, d),\n    fill: '#ccc',\n    d: d\n  }, arrowCfg);\n}; // 交互\n\nexport var bindStateEvents = function (graph, cfg) {\n  var _a = cfg !== null && cfg !== void 0 ? cfg : {},\n      _b = _a.nodeCfg,\n      nodeCfg = _b === void 0 ? {} : _b,\n      _c = _a.edgeCfg,\n      edgeCfg = _c === void 0 ? {} : _c;\n\n  var nodeStateStyles = nodeCfg.nodeStateStyles;\n  var edgeStateStyles = edgeCfg.edgeStateStyles;\n  /**\n   * 存储交互状态\n   * id: [[endActive, endDefalut], [startActive, startDefalut]]\n   */\n\n  var statusCache = {};\n\n  var updateArrowFill = function (item, endArrowFill, stratArrowFill) {\n    graph.updateItem(item, {\n      style: {\n        endArrow: !!endArrowFill && {\n          fill: endArrowFill\n        },\n        startArrow: !!stratArrowFill && {\n          fill: stratArrowFill\n        }\n      }\n    });\n  };\n\n  var setState = function (item, name, status) {\n    var _a, _b, _c;\n\n    status ? item.toFront() : item.toBack();\n\n    var _d = (_a = item.getModel().style) !== null && _a !== void 0 ? _a : {},\n        endArrow = _d.endArrow,\n        startArrow = _d.startArrow;\n\n    if (endArrow || startArrow) {\n      if (!statusCache[item.getID()]) {\n        //@ts-ignore\n        var endArrowFill = (endArrow !== null && endArrow !== void 0 ? endArrow : {}).fill; //@ts-ignore\n\n        var startArrowFill = (startArrow !== null && startArrow !== void 0 ? startArrow : {}).fill;\n        var hoverStatus = (_c = (_b = item.getModel().style) === null || _b === void 0 ? void 0 : _b[name]) === null || _c === void 0 ? void 0 : _c.stroke;\n        statusCache[item.getID()] = [[hoverStatus !== null && hoverStatus !== void 0 ? hoverStatus : endArrowFill, endArrowFill], [hoverStatus !== null && hoverStatus !== void 0 ? hoverStatus : startArrowFill, startArrowFill]];\n      }\n\n      var fill = statusCache[item.getID()];\n      updateArrowFill(item, endArrow && fill[0][status ? 0 : 1], startArrow && fill[1][status ? 0 : 1]);\n    }\n\n    graph.setItemState(item, name, status);\n  };\n\n  var getRelationItems = function (currentItem, name, status, type) {\n    var relationItems = type === 'node' ? graph.findAll('edge', function (edge) {\n      return edge.getSource() === currentItem || edge.getTarget() === currentItem;\n    }) : graph.findAll('node', function (node) {\n      return currentItem.getSource().get('id') === node.get('id') || currentItem.getTarget().get('id') === node.get('id');\n    });\n    var highlightItems = [currentItem].concat(relationItems);\n    highlightItems.forEach(function (item) {\n      setState(item, name, status);\n    });\n  };\n\n  if (nodeStateStyles) {\n    graph.on('node:mouseenter', function (evt) {\n      var item = evt.item;\n      getRelationItems(item, 'hover', true, 'node');\n    });\n    graph.on('node:mouseleave', function (evt) {\n      var item = evt.item;\n      getRelationItems(item, 'hover', false, 'node');\n    });\n  }\n\n  if (edgeStateStyles) {\n    graph.on('edge:mouseenter', function (evt) {\n      var item = evt.item;\n      getRelationItems(item, 'hover', true, 'edge');\n    });\n    graph.on('edge:mouseleave', function (evt) {\n      var item = evt.item;\n      getRelationItems(item, 'hover', false, 'edge');\n    });\n  }\n}; // 统一处理 config，支持回调\n\nexport var getStyle = function (source, cfg, item, current) {\n  if (typeof source === 'function') {\n    return source(cfg, item, current);\n  }\n\n  return source || {};\n}; // 统一处理 config，支持回调\n\nexport var getCommonConfig = function (cfg, item, graph) {\n  if (typeof cfg === 'function') {\n    return cfg(item, graph);\n  }\n\n  return cfg;\n};","map":{"version":3,"sources":["D:/LECONS-KHTN/CSDL Avancé/TH/sqlindex2/sql/frontend/node_modules/@ant-design/charts/es/graphs/utils.js"],"names":["__assign","Object","assign","t","s","i","n","arguments","length","p","prototype","hasOwnProperty","call","apply","G6","deepClone","isType","defaultMinimapCfg","getGraphSize","width","height","container","CANVAS_WIDTH","CANVAS_HEIGHT","current","offsetWidth","offsetHeight","console","warn","bindDefaultEvents","graph","onClick","e","item","target","get","updateItem","collapsed","getModel","layout","on","uuid","replace","c","r","Math","random","v","toString","getGraphId","renderGraph","data","autoFit","adjustLayout","originData","render","set","fitView","fitCenter","processMinimap","cfg","destroyed","show","curMminimapCfg","minimap","Minimap","addPlugin","getMarkerPosition","direction","size","x","y","bindSourceMapCollapseEvents","fullData","controlData","_a","_cfg","group","getChildren","find","attr","marker","type","_b","edges","fullEdges_1","nodeId","id","targetNodeIds_1","updateItems_1","updateIds_1","getLinkedId_1","currentId","forEach","edge","source","push","findAll","node","includes","hideItem","nodes","collapsedLevel","showItem","Array","from","Set","nodeItem","refreshItem","getCssPadding","padding","result","getArrowCfg","arrowCfg","d","_c","path","Arrow","fill","bindStateEvents","nodeCfg","edgeCfg","nodeStateStyles","edgeStateStyles","statusCache","updateArrowFill","endArrowFill","stratArrowFill","style","endArrow","startArrow","setState","name","status","toFront","toBack","_d","getID","startArrowFill","hoverStatus","stroke","setItemState","getRelationItems","currentItem","relationItems","getSource","getTarget","highlightItems","concat","evt","getStyle","getCommonConfig"],"mappings":"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","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport G6 from '@antv/g6';\nimport { deepClone, isType } from '../util/utils';\nimport { defaultMinimapCfg } from './constants';\nexport var getGraphSize = function (width, height, container) {\n    var CANVAS_WIDTH;\n    var CANVAS_HEIGHT;\n    if (container && container.current) {\n        CANVAS_WIDTH = container.current.offsetWidth;\n        CANVAS_HEIGHT = container.current.offsetHeight || 500;\n    }\n    if ((!width && !CANVAS_WIDTH) || (!height && !CANVAS_HEIGHT)) {\n        console.warn('请为 Graph 指定 width 与 height！否则将使用默认值 500 * 500');\n        return [500, 500];\n    }\n    return [width || CANVAS_WIDTH || 500, height || CANVAS_HEIGHT || 500];\n};\n// 展开&折叠事件\nexport var bindDefaultEvents = function (graph) {\n    var onClick = function (e) {\n        var item = e.item;\n        if (e.target.get('name') === 'collapse-icon') {\n            graph.updateItem(item, {\n                collapsed: !item.getModel().collapsed,\n            });\n            graph.layout();\n        }\n    };\n    graph.on('node:click', function (e) {\n        onClick(e);\n    });\n    graph.on('node:touchstart', function (e) {\n        onClick(e);\n    });\n};\nvar uuid = function () {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\n        return v.toString(16);\n    });\n};\n// 同一页面存在多 graph 时需要指定 graphId\nexport var getGraphId = function (graph) {\n    if (graph.current) {\n        return graph.current;\n    }\n    graph.current = \"IndentedTreeGraph-\" + uuid();\n    return graph.current;\n};\nexport var renderGraph = function (graph, data, autoFit, adjustLayout) {\n    if (adjustLayout === void 0) { adjustLayout = true; }\n    var originData = deepClone(data);\n    graph.data(originData);\n    graph.render();\n    // 关闭局部刷新，各种 bug\n    graph.get('canvas').set('localRefresh', false);\n    if (adjustLayout) {\n        autoFit ? graph.fitView() : graph.fitCenter();\n    }\n};\nexport var processMinimap = function (cfg, graph) {\n    if (cfg === void 0) { cfg = {}; }\n    if (!graph || graph.destroyed)\n        return;\n    if (cfg.show) {\n        var curMminimapCfg = Object.assign(defaultMinimapCfg, cfg);\n        var minimap = new G6.Minimap(__assign({}, curMminimapCfg));\n        graph.addPlugin(minimap);\n        return minimap;\n    }\n    return null;\n};\n/**\n * min ma\n */\nexport var getMarkerPosition = function (direction, size) {\n    if (direction === void 0) { direction = 'right'; }\n    var width = size[0], height = size[1];\n    var x = 0;\n    var y = 0;\n    switch (direction) {\n        case 'top':\n            x = width / 2;\n            y = 0;\n            break;\n        case 'right':\n            x = width;\n            y = height / 2;\n            break;\n        case 'bottom':\n            x = width / 2;\n            y = height;\n            break;\n        case 'left':\n            x = 0;\n            y = height / 2;\n            break;\n    }\n    return { x: x, y: y };\n};\nexport var bindSourceMapCollapseEvents = function (graph, fullData) {\n    var controlData = deepClone(fullData);\n    var onClick = function (e) {\n        var _a;\n        if (e.target.get('name') === 'collapse-icon') {\n            var item = e.item;\n            var collapsed = item.getModel().collapsed;\n            if (!isType(collapsed, 'Boolean')) {\n                // @ts-ignore\n                collapsed = (_a = item._cfg.group\n                    .getChildren()\n                    .find(function (item) { return item.get('name') === 'main-box'; })) === null || _a === void 0 ? void 0 : _a.attr('defaultCollapsed');\n            }\n            // @ts-ignore\n            var marker = e.item._cfg.group.getChildren().find(function (item) { return item.cfg.type === 'marker'; });\n            var _b = (fullData !== null && fullData !== void 0 ? fullData : {}).edges, fullEdges_1 = _b === void 0 ? [] : _b;\n            var nodeId = item.getModel().id;\n            var targetNodeIds_1 = [];\n            var updateItems_1 = [];\n            var updateIds_1 = [];\n            var getLinkedId_1 = function (currentId) {\n                fullEdges_1.forEach(function (edge) {\n                    var source = edge.source, target = edge.target;\n                    if (source === currentId) {\n                        targetNodeIds_1.push(target);\n                        getLinkedId_1(target);\n                    }\n                });\n            };\n            getLinkedId_1(nodeId);\n            if (!collapsed) {\n                // collapse\n                graph\n                    .findAll('node', function (node) { return targetNodeIds_1.includes(node.get('id')); })\n                    .forEach(function (node) { return graph.hideItem(node); });\n                controlData.nodes.forEach(function (node) {\n                    var _a = node.collapsedLevel, collapsedLevel = _a === void 0 ? 0 : _a, id = node.id;\n                    if (targetNodeIds_1.includes(id)) {\n                        node.collapsedLevel = collapsedLevel + 1;\n                    }\n                });\n            }\n            else {\n                // expand\n                graph\n                    .findAll('node', function (node) {\n                    var collapsedLevel = controlData.nodes.find(function (item) { return item.id === node.get('id'); }).collapsedLevel;\n                    return (targetNodeIds_1.includes(node.get('id')) && (!collapsedLevel || collapsedLevel < 2));\n                })\n                    .forEach(function (node) { return graph.showItem(node); });\n                controlData.nodes.forEach(function (node) {\n                    var _a = node.collapsedLevel, collapsedLevel = _a === void 0 ? 0 : _a, id = node.id;\n                    if (targetNodeIds_1.includes(id)) {\n                        node.collapsedLevel = collapsedLevel - 1;\n                    }\n                });\n            }\n            fullEdges_1.forEach(function (edge) {\n                var source = edge.source, target = edge.target;\n                if (targetNodeIds_1.includes(target)) {\n                    updateIds_1.push(source);\n                }\n            });\n            updateIds_1 = Array.from(new Set(updateIds_1));\n            updateIds_1.forEach(function (id) {\n                updateItems_1.push(graph.find('node', function (node) { return node.get('id') === id; }));\n            });\n            updateItems_1.forEach(function (nodeItem) {\n                graph.updateItem(nodeItem, {\n                    collapsed: !nodeItem.getModel().collapsed,\n                });\n                graph.refreshItem(nodeItem);\n            });\n        }\n    };\n    graph.on('node:click', function (e) {\n        onClick(e);\n    });\n    graph.on('node:touchstart', function (e) {\n        onClick(e);\n    });\n};\n/**\n * padding | margin 按 CSS 规则转换\n */\nexport var getCssPadding = function (padding) {\n    if (typeof padding === 'number') {\n        return [padding, padding, padding, padding];\n    }\n    var result = [];\n    switch (padding.length) {\n        case 1:\n            result = [padding[0], padding[0], padding[0], padding[0]];\n            break;\n        case 2:\n            result = [padding[0], padding[1], padding[0], padding[1]];\n            break;\n        case 3:\n            result = [padding[0], padding[1], padding[2], padding[1]];\n            break;\n        case 4:\n            result = padding;\n            break;\n        default:\n            break;\n    }\n    return result;\n};\n// 默认箭头样式\nexport var getArrowCfg = function (arrowCfg, edge) {\n    if (!arrowCfg) {\n        return;\n    }\n    if (typeof arrowCfg === 'function') {\n        return arrowCfg(edge);\n    }\n    if ((arrowCfg === null || arrowCfg === void 0 ? void 0 : arrowCfg.show) === false) {\n        return;\n    }\n    var _a = arrowCfg.type, type = _a === void 0 ? 'vee' : _a, _b = arrowCfg.d, d = _b === void 0 ? 0 : _b, _c = arrowCfg.size, size = _c === void 0 ? 10 : _c;\n    return __assign({ path: G6.Arrow[type](size, size, d), fill: '#ccc', d: d }, arrowCfg);\n};\n// 交互\nexport var bindStateEvents = function (graph, cfg) {\n    var _a = cfg !== null && cfg !== void 0 ? cfg : {}, _b = _a.nodeCfg, nodeCfg = _b === void 0 ? {} : _b, _c = _a.edgeCfg, edgeCfg = _c === void 0 ? {} : _c;\n    var nodeStateStyles = nodeCfg.nodeStateStyles;\n    var edgeStateStyles = edgeCfg.edgeStateStyles;\n    /**\n     * 存储交互状态\n     * id: [[endActive, endDefalut], [startActive, startDefalut]]\n     */\n    var statusCache = {};\n    var updateArrowFill = function (item, endArrowFill, stratArrowFill) {\n        graph.updateItem(item, {\n            style: {\n                endArrow: !!endArrowFill && {\n                    fill: endArrowFill,\n                },\n                startArrow: !!stratArrowFill && {\n                    fill: stratArrowFill,\n                },\n            },\n        });\n    };\n    var setState = function (item, name, status) {\n        var _a, _b, _c;\n        status ? item.toFront() : item.toBack();\n        var _d = (_a = item.getModel().style) !== null && _a !== void 0 ? _a : {}, endArrow = _d.endArrow, startArrow = _d.startArrow;\n        if (endArrow || startArrow) {\n            if (!statusCache[item.getID()]) {\n                //@ts-ignore\n                var endArrowFill = (endArrow !== null && endArrow !== void 0 ? endArrow : {}).fill;\n                //@ts-ignore\n                var startArrowFill = (startArrow !== null && startArrow !== void 0 ? startArrow : {}).fill;\n                var hoverStatus = (_c = (_b = item.getModel().style) === null || _b === void 0 ? void 0 : _b[name]) === null || _c === void 0 ? void 0 : _c.stroke;\n                statusCache[item.getID()] = [\n                    [hoverStatus !== null && hoverStatus !== void 0 ? hoverStatus : endArrowFill, endArrowFill],\n                    [hoverStatus !== null && hoverStatus !== void 0 ? hoverStatus : startArrowFill, startArrowFill],\n                ];\n            }\n            var fill = statusCache[item.getID()];\n            updateArrowFill(item, endArrow && fill[0][status ? 0 : 1], startArrow && fill[1][status ? 0 : 1]);\n        }\n        graph.setItemState(item, name, status);\n    };\n    var getRelationItems = function (currentItem, name, status, type) {\n        var relationItems = type === 'node'\n            ? graph.findAll('edge', function (edge) { return edge.getSource() === currentItem || edge.getTarget() === currentItem; })\n            : graph.findAll('node', function (node) {\n                return currentItem.getSource().get('id') === node.get('id') ||\n                    currentItem.getTarget().get('id') === node.get('id');\n            });\n        var highlightItems = [currentItem].concat(relationItems);\n        highlightItems.forEach(function (item) {\n            setState(item, name, status);\n        });\n    };\n    if (nodeStateStyles) {\n        graph.on('node:mouseenter', function (evt) {\n            var item = evt.item;\n            getRelationItems(item, 'hover', true, 'node');\n        });\n        graph.on('node:mouseleave', function (evt) {\n            var item = evt.item;\n            getRelationItems(item, 'hover', false, 'node');\n        });\n    }\n    if (edgeStateStyles) {\n        graph.on('edge:mouseenter', function (evt) {\n            var item = evt.item;\n            getRelationItems(item, 'hover', true, 'edge');\n        });\n        graph.on('edge:mouseleave', function (evt) {\n            var item = evt.item;\n            getRelationItems(item, 'hover', false, 'edge');\n        });\n    }\n};\n// 统一处理 config，支持回调\nexport var getStyle = function (source, cfg, item, current) {\n    if (typeof source === 'function') {\n        return source(cfg, item, current);\n    }\n    return source || {};\n};\n// 统一处理 config，支持回调\nexport var getCommonConfig = function (cfg, item, graph) {\n    if (typeof cfg === 'function') {\n        return cfg(item, graph);\n    }\n    return cfg;\n};\n"]},"metadata":{},"sourceType":"module"}